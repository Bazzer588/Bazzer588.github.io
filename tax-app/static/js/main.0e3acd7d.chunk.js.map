{"version":3,"sources":["Fixers.js","registerServiceWorker.js","startRedux.js","components/AppConfig.js","components/PageRouter.js","FormField.js","FormSection.js","FormConnect.js","validation/validateString.js","sections/ContactSection.js","components/Select.js","components/Radios.js","sections/TaxForm3.js","components/FieldSet.js","sections/AddressSection.js","components/CheckBox.js","sections/ComboField.js","components/Button.js","validation/index.js","sections/RoomCount.js","sections/BigForm.js","pages/HomePage.js","pages/IconLang.js","components/Loader.js","pages/SearchPage.js","components/PhoneInput.js","pages/TestPopup.js","pages/PickerPopup.js","pages/PaymentPage.js","App.js","index.js","logo.svg"],"names":["String","prototype","endsWith","search","this_len","undefined","this","length","substring","startsWith","pos","substr","Array","find","fn","len","n","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","DEF_STATE","coreData","lang","rootReducer","combineReducers","formState","arguments","action","type","Object","objectSpread","defineProperty","key","value","data","store","createStore","__REDUX_DEVTOOLS_EXTENSION__","applyMiddleware","thunk","translate","t","getOptionList","getOptionDescriptions","pageRoutes","pageMappers","modPage","url","toTop","replace","scrollTo","history","replaceState","pushState","popStateEvent","PopStateEvent","dispatchEvent","err","ev","document","createEvent","initEvent","PageRouter","listenForPopState","_this","setState","dt","Date","now","addEventListener","removeEventListener","thing","path","pathsplit","split","splice","z","getPageRoute","pathname","title","react_default","a","createElement","Compo","assign","values","push","React","Component","FormField","onBlur","_this$props","props","touched","name","parent","onBlurField","assertThisInitialized","onChange","mod","target","_this$props2","onChangeField","_this$props3","showErrors","required","_this$props3$showLabe","showLabel","htmlId","inputClass","_this$props3$fieldCla","fieldClass","component","validator","stripProps","others","objectWithoutProperties","full","labl","invalid","errorId","otherProps","divClass","className","htmlFor","aria-describedby","aria-invalid","id","aria-live","minLength","found","JSON","stringify","vals","renderError","PureComponent","make","Wrapped","isArray","DEF","DEF_ARR","DEF_VAL","FormSection","_React$PureComponent","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","setShowErrors","fieldName","newValue","changed","updateRedux","toConsumableArray","renderField","fieldProps","extraProps","validateSection","_this$props3$touched","_this$props3$value","fullPath","myRef","createRef","inherits","createClass","current","showErrorsWrap","defaultProps","dispatch","FormConnect","reactClass","defaultName","connect","withRef","validateString","output","trim","maxLength","pattern","nextValidator","RegExp","test","r","toLocaleUpperCase","stringTypeField","validateEmail","indexOf","at1","at2","lastIndexOf","dot","HomePhone","MobilePhone","idiot","Email","spellCheck","validateContactSection","v","Section","_this$props$value","_this$props$touched","Field","index","parseInt","Fragment","style","margin","fontWeight","color","fontSize","sdtupid","sections_ContactSection","Select","options","allowOption","rangeFrom","rangeTo","rest","base","cnm","opts","d","list","map","forEach","row","renderOptions","Radios","label","afterRadio","radioId","checked","onClick","onClickRadio","focus","TaxReferenceNo","FirstName","LastName","UserName","placeholder","autoComplete","Gender","ZipCode","Phones","ContactSection","Country","code","allowArgentina","input","tax","display","verticalAlign","width","paddingRight","boxSizing","requireCountry","FieldSet","aria-label","children","Address1","Area","City","Region","validateAddress","CheckBox","_ref","_ref$className","validateCombo","x","country","part","phone","comboTypeField","ComboField","timer","defs","onPartChange","item","elem","relatedTarget","activeElement","setTimeout","handleBlur","onFocusField","clearTimeout","marginRight","onFocus","Button","_ref$cnm","validateTree","sectionProps","errors","child","fieldValue","resp","childOutput","RoomsRequired","validateRoomCount","ListOfRooms","listLength","roomsRequired","_props$value","ListOfThings","repeatThing","fixedList","cc","arr","validateList","makeRepeatable","makeContactSection","CarsInHouse","ParkingSpaces","AgeRetire","ConsentSMS","ConsentEmail","ConsentOth","Thingy","Whatever","HomeAddress","AddressSection","OverseasAddress","WorkAddress","HomePhones","OverseasPhones","RoomsSection","RoomCount","marginTop","HomePage","src","logo","alt","TaxForm3","sections_BigForm","textAlign","changePage","getState","alert","IconLang","xmlns","height","viewBox","fill","Loader","text","p","getElementById","animation","tabIndex","SearchPage","goHomePage","loading","mainDivProps","aria-disabled","aria-hidden","Loader_Loader","DEF_CODE","phoneTypeField","PhoneInput","validatePhone","tel","docClick","pop","btn","telChange","val","co","preventDefault","_this2","href","setCo","TestPop","onClose","popup","foc","fadeOut","classList","add","content","role","aria-labelledby","stopPropagation","PickerPop","popupCode","content2","content3","CardNumber","CVV","NameOnCard","EmoField","FaxField","validatePaymentPage","PaymentPage","doCheckout","page","smsTrack","inputErrors","message","sendPayment","res","showStatus","response","cvvNumber","Error","paymentFinished","e","handleError","focusToFirstError","prevProps","prevState","snapshot","_ref2","dprops","link","back","Promise","resolve","defineRoute","pa","record","App","PageRouter_PageRouter","personalRef","spouseRef","setGetOptionList","yesno","gender","months","languages","setGetOptionDescriptions","Y","N","M","F","GB","US","CN","BW","AR","en","zh","ru","fr","Root","ReactDOM","render","es","URL","process","origin","concat","fetch","status","headers","get","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","redux","module","exports","__webpack_require__"],"mappings":"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","file":"static/js/main.0e3acd7d.chunk.js","sourcesContent":["\r\n// IE 11 rubbish\r\n\r\nif (!String.prototype.endsWith) {\r\n    String.prototype.endsWith = function(search, this_len) {    // eslint-disable-line\r\n        if (this_len === undefined || this_len > this.length) {\r\n            this_len = this.length;\r\n        }\r\n        return this.substring(this_len - search.length, this_len) === search;\r\n    };\r\n}\r\n\r\nif (!String.prototype.startsWith) {\r\n    String.prototype.startsWith = function(search, pos) {   // eslint-disable-line\r\n        return this.substr(!pos || pos < 0 ? 0 : +pos, search.length) === search;\r\n    };\r\n}\r\n\r\nif (!Array.prototype.find) {\r\n    Array.prototype.find = function( fn ) {  // eslint-disable-line\r\n        const len = this.length;\r\n        for (let n=0;n<len;n++) {\r\n            if (fn(this[n])) {\r\n                return this[n];\r\n            }\r\n        }\r\n    }\r\n}\r\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {combineReducers, createStore, applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\n\r\nconst DEF_STATE = {\r\n    coreData: {\r\n        lang: 'en'\r\n    }\r\n};\r\n\r\n// reducer\r\n\r\nfunction formState (state = DEF_STATE, action) {\r\n    //console.log('REDX',action);\r\n\r\n    switch(action.type) {\r\n        case 'SET':             // { type: 'SET', key: 'myThing', value: {...} }\r\n            return {\r\n                ...state,\r\n                [action.key]: action.value\r\n            };\r\n        case 'CORE':            // { type: 'CORE', data: { lang: 'de' } }\r\n            return {\r\n                ...state,\r\n                coreData: {\r\n                    ...state.coreData,\r\n                    ...action.data\r\n                }\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nconst rootReducer = combineReducers({\r\n    formState\r\n});\r\n\r\nfunction configureStore () {\r\n    return createStore(\r\n        rootReducer,\r\n        window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\r\n        applyMiddleware(thunk)\r\n    );\r\n}\r\n\r\nconst store = configureStore();\r\n\r\nexport default store;\r\n","\r\nlet translate = (t) => {\r\n    return t;\r\n};\r\n\r\nlet getOptionList = () => {\r\n    return [];\r\n};\r\n\r\nlet getOptionDescriptions = () => {\r\n    return {};\r\n};\r\n\r\n// setters\r\n\r\nexport function setTranslator (fn) {\r\n    translate = fn;\r\n}\r\n\r\nexport function setGetOptionList (fn) {\r\n    getOptionList = fn;\r\n}\r\n\r\nexport function setGetOptionDescriptions (fn) {\r\n    getOptionDescriptions = fn;\r\n}\r\n\r\n// export\r\n\r\nexport { translate, getOptionList, getOptionDescriptions };\r\n","import React from 'react';\r\n\r\nconst pageRoutes = {};\r\nconst pageMappers = [];\r\n\r\nfunction getPageRoute (path) {\r\n    const t = pageRoutes[path];\r\n    if (t)\r\n        return t;\r\n\r\n    const pathsplit = path.split('/'); // .splice(0,1);\r\n    pathsplit.splice(0,1); // remove '' from start\r\n\r\n    for (let n=0;n<pageMappers.length;n++) {\r\n        const z = pageMappers[n](pathsplit);\r\n        if (z)\r\n            return z;\r\n    }\r\n\r\n    return pageRoutes['/']\r\n}\r\n\r\nfunction modPage (url, toTop, replace) {\r\n    console.log('modPage',url,toTop);\r\n    if (toTop) window.scrollTo(0,0);\r\n    if (replace) {\r\n        window.history.replaceState(null, '', url); // data, title\r\n    } else {\r\n        window.history.pushState(null, '', url); // data, title\r\n    }\r\n\r\n    try {\r\n        const popStateEvent = new PopStateEvent('popstate', {state: {}});\r\n        dispatchEvent(popStateEvent);\r\n    } catch (err) {\r\n        const ev = document.createEvent('Event');\r\n        ev.initEvent('popstate', false, false);\r\n        dispatchEvent(ev);\r\n    }\r\n}\r\n\r\nexport default class PageRouter extends React.Component {\r\n\r\n    static defineRoute (pathname, thing, title) {\r\n        // console.log('defineRoute', pathname, typeof pathname, typeof thing, title);\r\n        if (typeof pathname === 'function') {\r\n            pageMappers.push(pathname);\r\n        } else {\r\n            pageRoutes[pathname] = {\r\n                Compo: thing,\r\n                title\r\n            };\r\n        }\r\n    }\r\n\r\n    static replacePage (url, toTop = true) {\r\n        modPage(url,toTop,true);\r\n    }\r\n\r\n    static changePage (url, toTop = true) {\r\n        modPage(url,toTop);\r\n    }\r\n\r\n    componentDidMount () {\r\n        window.addEventListener('popstate', this.listenForPopState );\r\n    }\r\n\r\n    componentWillUnmount () {\r\n        window.removeEventListener('popstate', this.listenForPopState );\r\n    }\r\n\r\n    listenForPopState = (ev) => {\r\n        console.log('POPSTATE:',ev);\r\n        this.setState( { dt: Date.now() } ); // make react redraw\r\n    };\r\n\r\n    render() {\r\n        const thing = getPageRoute(window.location.pathname);\r\n\r\n        if (thing.title) document.title = thing.title; // TODO translate\r\n\r\n        return (<thing.Compo search={window.location.search} {...thing.values} />);\r\n    }\r\n\r\n}\r\n","import React from \"react\";\r\nimport {translate} from './components/AppConfig';\r\n\r\nexport default class FormField extends React.PureComponent {\r\n\r\n    onBlur = () => {\r\n        const { touched, name, parent } = this.props;\r\n        if (!touched) {\r\n            parent.onBlurField(name,true,this);\r\n        }\r\n    };\r\n\r\n    onChange = (ev) => {\r\n        const mod = ev.target.value;\r\n        const { name, parent } = this.props;\r\n        parent.onChangeField(name,mod,this);\r\n    };\r\n\r\n    render () {\r\n        const { parent, coreData, name, path, showErrors, touched, required, showLabel = true, htmlId, inputClass, fieldClass = '',\r\n            component, validator, stripProps, ...others } = this.props;\r\n        const Compo = component || 'input';\r\n        const value = this.props.value || '';\r\n        const full = path + '-' + (htmlId || name);\r\n        const labl = path + '-' + name;\r\n\r\n        const error = (!!touched || showErrors) && validator && validator(value,this.props,path);\r\n        const invalid = error && !!error.error;\r\n        // const invalid = required!==false && !!touched && !value;\r\n        const errorId = invalid ? full+'-fieldError' : undefined;\r\n\r\n        const otherProps = stripProps ? stripProps(others) : others;\r\n\r\n        const divClass = invalid ? 'form-field ff-invalid' : 'form-field';\r\n        return (\r\n            <div className={divClass+' '+fieldClass}>\r\n                {showLabel && <label htmlFor={full}>{translate(labl,required)}</label>}\r\n                <Compo\r\n                    aria-describedby={errorId}\r\n                    aria-invalid={invalid}\r\n                    className={inputClass}\r\n                    id={full}\r\n                    onBlur={this.onBlur}\r\n                    onChange={this.onChange}\r\n                    required={required}\r\n                    {...otherProps}\r\n                    value={value}\r\n                />\r\n                {invalid && renderError(error,errorId)}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nfunction renderError (error, errorId) {\r\n    function vals (error, values) {\r\n        if (values) {\r\n            if (values.minLength) return 'Please enter at least '+error.values.minLength+' characters';\r\n            if (values.found) return 'Invalid email, character sequence \"'+values.found+'\" is not allowed';\r\n            return error.error+' '+JSON.stringify(values);\r\n        }\r\n        return error.error;\r\n    }\r\n    return (\r\n        <span\r\n            aria-live=\"assertive\"\r\n            className=\"field-error\"\r\n            id={errorId}\r\n        >\r\n            {vals(error,error.values)}\r\n            {error.required && ' *'}\r\n        </span>\r\n    );\r\n}\r\n\r\n/*  render manually\r\n\r\n    <FormField\r\n        {...fieldProps}\r\n        coreData={coreData}\r\n        parent={this}\r\n        path={path+'-'+this.props.name}\r\n        touched={ this.props.touched[ fieldProps.name ] }\r\n        value={ this.props.value[ fieldProps.name ] }\r\n    />\r\n\r\n    parent/this must have props:\r\n        onChangeField\r\n        onBlurField\r\n\r\n */\r\n\r\n/*  OTHER THINGS\r\n    help popups\r\n    focus help (show layer with more info)\r\n    good data indicator (ie entry is valid, show a tick)\r\n    layout options (ie traditional table style)\r\n    extra field info ('Full name as displayed on card')\r\n    dimmed text in label - ie 'Address 2 (optional)' where bracketed is gray\r\n\r\n\r\n    PASSING CUSTOM ATTRIBUTES TO THE HTML INPUT\r\n    https://reactjs.org/blog/2017/09/08/dom-attributes-in-react-16.html\r\n\r\n */\r\n","import React from 'react';\r\nimport FormField from \"./FormField\";\r\n\r\nexport default function make (Wrapped, isArray) {\r\n\r\n    const DEF = isArray ? DEF_ARR : DEF_VAL;\r\n\r\n    class FormSection extends React.PureComponent {\r\n\r\n        constructor (props) {\r\n            super(props);\r\n            this.myRef = React.createRef();\r\n            this.state = {};\r\n        }\r\n\r\n        getWrappedInstance () {\r\n            return this.myRef.current;\r\n        }\r\n\r\n        setShowErrors = (showErrors) => {\r\n            this.setState({ showErrors });\r\n        };\r\n\r\n        /*testClick = (ev) => {\r\n            const node = this.getWrappedInstance();\r\n            console.log('NODE', node);\r\n            node.testHit(ev);\r\n        };*/\r\n\r\n        onBlurField = (fieldName,newValue) => {\r\n            const { touched, name, updateRedux, parent } = this.props;\r\n\r\n            //const changed = { ...touched, [fieldName]: newValue };\r\n            let changed;\r\n            if (isArray) {\r\n                changed = touched ? [...touched] : [];\r\n                changed[fieldName] = newValue;\r\n            } else {\r\n                changed = {...touched, [fieldName]: newValue};\r\n            }\r\n\r\n            if (updateRedux)\r\n                updateRedux({ type: 'SET', key: name+'_T', value: changed });\r\n            if (parent) {\r\n                parent.onBlurField(name,changed,this);\r\n            }\r\n        };\r\n\r\n        onChangeField = (fieldName, newValue) => {\r\n            const {value, name, updateRedux, parent} = this.props;\r\n\r\n            // const changed = {...value, [fieldName]: newValue};\r\n            let changed;\r\n            if (isArray) {\r\n                changed = value ? [...value] : [];\r\n                changed[fieldName] = newValue;\r\n            } else {\r\n                changed = {...value, [fieldName]: newValue};\r\n            }\r\n\r\n            if (updateRedux)\r\n                updateRedux({type: 'SET', key: name, value: changed});\r\n            if (parent) {\r\n                parent.onChangeField(name, changed, this);\r\n            }\r\n        };\r\n\r\n        renderField = (fieldProps, extraProps) => {\r\n\r\n            // const stt = this.getWrappedInstance().state;\r\n            // console.log('renderField',fieldProps);\r\n\r\n            const Compo = fieldProps.validateSection ? fieldProps.component : FormField;\r\n            const {name, path, touched = DEF, value = DEF, coreData} = this.props;\r\n            const showErrors = this.state.showErrors || this.props.showErrors;\r\n\r\n            if (!name) {  // only sections can be nameless\r\n                return <Compo\r\n                    {...fieldProps}\r\n                    {...extraProps}\r\n                    coreData={coreData}\r\n                    parent={this}\r\n                    path={path}\r\n                    showErrors={showErrors}\r\n                    touched={touched}\r\n                    value={value}\r\n                />\r\n            }\r\n\r\n            // --- it has a name ---\r\n            const fullPath = path ? path + '-' + name : name;   // ie 'myForm-roomList-2-roomNumber'\r\n            // console.log('RF',fullPath,fieldProps.name);\r\n            return <Compo\r\n                {...fieldProps}\r\n                {...extraProps}\r\n                coreData={coreData}\r\n                key={fullPath + '-' + fieldProps.name}\r\n                parent={this}\r\n                path={fullPath}\r\n                showErrors={showErrors}\r\n                touched={touched[fieldProps.name]}\r\n                value={value[fieldProps.name]}\r\n            />\r\n        };\r\n\r\n        render () {\r\n            // console.log('REND',this.props.name,this.state.showErrors);\r\n\r\n            // ref={this.myRef}   // this does not work if Wrapped is a functional component\r\n            return (\r\n                <Wrapped\r\n                    showErrorsWrap={this.state.showErrors}\r\n                    {...this.props}\r\n                    renderField={this.renderField}\r\n                    setShowErrors={this.setShowErrors}\r\n                />\r\n            );\r\n        }\r\n    }\r\n\r\n    FormSection.defaultProps = Wrapped.defaultProps;\r\n\r\n    return FormSection;\r\n}\r\n\r\nconst DEF_VAL = {};\r\nconst DEF_ARR = [];\r\n","import {connect} from \"react-redux\";\r\n\r\nconst DEF_VAL = {};\r\n\r\nconst updateRedux = (action) => (dispatch) => {   // (dispatch, getState)\r\n    return dispatch(action);\r\n};\r\n\r\nexport default function FormConnect (reactClass) {\r\n    const defaultName = reactClass.defaultProps && reactClass.defaultProps.name;\r\n\r\n    // props param below appears to ignore defaultProps\r\n\r\n    function mapStateToProps (state, props) {\r\n        const name = props.name || defaultName;\r\n        const value = state.formState[name] || DEF_VAL;\r\n        const touched = state.formState[name+'_T'] || DEF_VAL;\r\n        return {\r\n            value,\r\n            touched,\r\n            coreData: state.formState.coreData // language etc\r\n        };\r\n    }\r\n\r\n    return connect(mapStateToProps,{updateRedux},null,{ withRef: true })(reactClass);\r\n}\r\n","\r\n/** basic string validation using props:\r\n *\r\n * @param value a string, or could be undefined\r\n * @param props name, required, minLength, maxLength, pattern\r\n * @param path path to field in the tree\r\n * @param output clean output if valid\r\n * @returns {boolean|*} true if output value was set, an error object if there was an error\r\n */\r\n\r\nexport default function validateString (value, props, path, output) {\r\n    const { name, required } = props;\r\n    //console.log('VS',props.name,value);\r\n\r\n    if (value) {\r\n        if (typeof value === 'string') {\r\n            value = value.trim();\r\n            if (value) {\r\n                const { minLength, maxLength, pattern, nextValidator } = props;\r\n                const len = value.length;\r\n                if (minLength && len < minLength) {\r\n                    return {name, path, required, error: 'minLength', values: { minLength } };\r\n                }\r\n                if (maxLength && len > maxLength) {\r\n                    return {name, path, required, error: 'maxLength', values: { maxLength } };\r\n                }\r\n                if (pattern) {\r\n                    const reg = new RegExp(pattern); // ie ^[0-9]+$\r\n                    if (!reg.test(value)) {\r\n                        return {name, path, required, error: 'pattern' };\r\n                    }\r\n                }\r\n                // todo numeric ? alpha ? decimal ?\r\n                if (nextValidator) {\r\n                    const r = nextValidator(value,props,path,output);\r\n                    if (r) {\r\n                        return r;\r\n                    }\r\n                }\r\n                if (output) {\r\n                    if (props.inputClass==='upper-case') value = value.toLocaleUpperCase();\r\n                    output[name] = value;\r\n                }\r\n                return true;\r\n            }\r\n        } else {\r\n            // value is not a string - this is presumably invalid\r\n            return { name, path, required, error: 'invalidString' };\r\n        }\r\n    }\r\n\r\n    // there is no value\r\n    if (required) {\r\n        return { name, path, required, error: 'required' };\r\n    } else {\r\n        if (output) {\r\n            output[name] = '';\r\n        }\r\n    }\r\n}\r\n\r\nexport const stringTypeField = (name,props) => { return { name, ...props, validator: validateString } };\r\n\r\n\r\nexport function validateEmail (value, props, path, output) {\r\n    const err = validateString(value,props,path);\r\n    if (err===true) {\r\n        const { name, required } = props;\r\n        value = value.trim();\r\n\r\n        // invalid character sequences\r\n        const bad = [' ','..','.@','@.'];\r\n        const found = bad.find( (t) => value.indexOf(t)>=0 );\r\n        if (found) {\r\n            return { name, path, required, error: 'invalidEmail', values: { found } };\r\n        }\r\n\r\n        // general format, xxxx.xxx@xxx.xxx\r\n        const len = value.length;\r\n        const at1 = value.indexOf('@');\r\n        const at2 = value.lastIndexOf('@');\r\n        const dot = value.lastIndexOf('.');\r\n        if (dot===len-1 || at1<0 || at1<at2 || dot<at2) {\r\n            return { name, path, required, error: 'invalidEmail' };\r\n        }\r\n        if (output) {\r\n            output[name] = value;\r\n        }\r\n        return true;\r\n    }\r\n    return err;\r\n}\r\n\r\nexport const emailTypeField = (name,props) => { return { name, ...props, validator: validateEmail } };\r\n","import React from \"react\";\r\nimport FormSection from '../FormSection';\r\nimport { stringTypeField, emailTypeField } from '../validation/validateString'\r\n\r\nconst HomePhone = stringTypeField( 'homePhone', { maxLength: 12, type: 'tel', required: false });\r\nconst MobilePhone = stringTypeField( 'mobilePhone', { maxLength: 12, type: 'tel', required: false, idiot: '38439' });\r\nconst Email = emailTypeField( 'emailAddress', { maxLength: 80, minLength: 6, required: false, spellCheck: false, /*autoComplete: 'never-ever',*/ htmlId: 'otherField', type: 'email' });\r\n\r\nexport function validateContactSection (v) { // v, values, sectionProps, output, errors, path\r\n    v(HomePhone);\r\n    v(MobilePhone);\r\n    v(Email);\r\n}\r\n\r\nclass ContactSection extends React.PureComponent {\r\n\r\n    render () {\r\n        const { name, renderField, value = {}, touched = {} } = this.props;\r\n        const Field = renderField;\r\n        const v = value[HomePhone.name] || value[MobilePhone.name] || value[Email.name] ;\r\n        const z = !!touched[HomePhone.name] && !!touched[MobilePhone.name] && !!touched[Email.name] ;\r\n        const t = (z && !v);\r\n        const index = parseInt(name);\r\n        return (\r\n            <>\r\n                {index>=0 && <div style={{ margin: '16px 0 0 2px', fontWeight: '600', color: '#444', fontSize: '17px' }} >Contact number {index+1}</div>}\r\n                <Field {...HomePhone} required={t} sdtupid={87} />\r\n                <Field {...MobilePhone} required={t} />\r\n                <Field {...Email} required={t} />\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\n\r\nconst Section = FormSection(ContactSection);\r\nexport default Section;\r\n\r\nexport function makeContactSection (name) {\r\n    return  { name, component: Section, validateSection: validateContactSection }\r\n}\r\n\r\n/*\r\n    {renderField(HomePhone,{ required: t })}\r\n    {renderField(MobilePhone,{ required: t })}\r\n    {renderField(Email,{ required: t })}\r\n\r\n */","import React from \"react\";\r\nimport {translate, getOptionList, getOptionDescriptions} from './AppConfig';\r\n\r\nexport default function Select (props) {\r\n    // console.log('SELECT',props);\r\n\r\n    const {options, allowOption, rangeFrom, rangeTo, className, ...rest} = props;\r\n    const {value, required, id} = props;\r\n\r\n    const base = !!value ? 'custom-select' : 'custom-select no-value';\r\n    const cnm = className ? base+' '+className : base;\r\n\r\n    return (\r\n        <select {...rest} className={cnm}>\r\n            {(value==='' || value===undefined || required === false) &&\r\n                <option value=\"\">{translate(id + '-pleaseSelect', required)}</option>\r\n            }\r\n            {renderOptions(options, allowOption, props, rangeFrom, rangeTo)}\r\n        </select>\r\n    );\r\n}\r\n\r\n// render the array of <option> elements\r\n\r\nfunction renderOptions (options, allowOption, props, rangeFrom, rangeTo) {\r\n\r\n    const opts = [];\r\n\r\n    if (rangeFrom || rangeTo) {\r\n        const d = rangeFrom<rangeTo ? 1 : -1;\r\n        for (let n=rangeFrom;;n+=d) {\r\n            opts.push(<option key={n} value={n}>{n}</option>);\r\n            if (n===rangeTo) break;\r\n        }\r\n        return opts;\r\n    }\r\n\r\n    const list = getOptionList(options);\r\n    const map = getOptionDescriptions(options);\r\n\r\n    list.forEach(row => {\r\n        if (!allowOption || allowOption(row, props))\r\n            opts.push(<option key={row} value={row}>{map[row] || row}</option>);\r\n    });\r\n\r\n    return opts;\r\n}\r\n\r\n// useful\r\n// https://stackoverflow.com/questions/5805059/how-do-i-make-a-placeholder-for-a-select-box\r\n","import React from \"react\";\r\nimport {translate, getOptionList, getOptionDescriptions} from './AppConfig';\r\n\r\nexport default function Radios (props) {\r\n\r\n    const {id, label} = props;\r\n\r\n    return (\r\n        <fieldset className=\"radio-fieldset\" id={id}>\r\n            <legend>{translate(label)}</legend>\r\n            {renderOptions(props)}\r\n        </fieldset>\r\n    );\r\n}\r\n\r\n// render an array of radio buttons\r\n\r\nfunction renderOptions (props) {\r\n\r\n    const {options, allowOption, value, id, className, afterRadio} = props;\r\n\r\n    const opts = [];\r\n\r\n    const cnm = className==='horizontal' ? 'radio-horizontal' : 'radio';\r\n\r\n    const list = getOptionList(options);\r\n    const map = getOptionDescriptions(options);\r\n\r\n    list.forEach(row => {\r\n        if (!allowOption || allowOption(row, props)) {\r\n            const radioId = id+'-'+row;  // ie 'form-section-gender-F'\r\n            opts.push(\r\n                <div className={cnm} key={radioId}>\r\n                    <input\r\n                        id={radioId}\r\n                        name={id}\r\n                        type=\"radio\"\r\n                        value={row}\r\n                        checked={row===value}\r\n                        aria-describedby={props['aria-describedby']}\r\n                        onChange={props.onChange}\r\n                        onBlur={props.onBlur}\r\n                        onClick={onClickRadio}\r\n                    />\r\n                    <label htmlFor={radioId}>\r\n                        {map[row] || row}\r\n                    </label>\r\n                </div>\r\n            );\r\n            if (afterRadio) {  // render something after this radio\r\n                const v = afterRadio(row);\r\n                if (v) opts.push(v);\r\n            }\r\n        }\r\n    });\r\n\r\n    return opts;\r\n}\r\n\r\nfunction onClickRadio (ev) {\r\n    ev.target.focus();\r\n    // console.log('onClickRadio',ev.target.id);\r\n}\r\n","import React from \"react\";\r\nimport FormSection from '../FormSection';\r\nimport FormConnect from '../FormConnect';\r\nimport ContactSection, {validateContactSection} from \"./ContactSection\";\r\nimport Select from \"../components/Select\";      // eslint-disable-line no-unused-vars\r\nimport Radios from \"../components/Radios\";\r\nimport { stringTypeField } from '../validation/validateString'\r\nimport {translate} from '../components/AppConfig';\r\n\r\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete\r\n\r\nconst TaxReferenceNo = stringTypeField( 'taxRef', {maxLength: 8, minLength: 5, inputClass: 'narrow upper-case', required: true, spellCheck: false, type: 'tel', pattern: '^[0-9]+$' });\r\nconst FirstName = stringTypeField( 'firstName', {maxLength: 16, minLength: 2});\r\nconst LastName = stringTypeField( 'lastName', {maxLength: 30, required: true });\r\nconst UserName = stringTypeField( 'username', {placeholder: 'Username', autoComplete: 'username', type: 'text', pattern: '(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}' });\r\n\r\nconst Gender = stringTypeField( 'gender', {component: Radios, options: 'gender', required: true, showLabel: false, label: 'Gender', inputClass: 'medium', className: 'horizontal' });\r\nconst ZipCode = stringTypeField( 'zipCode', {maxLength: 12, autoComplete: 'postal-code', required: false, inputClass: 'narrow' });\r\n\r\nconst Phones = { name: 'phones', component: ContactSection, validateSection: validateContactSection };\r\n\r\nconst allowCountry = (code, props) => {\r\n    if (code==='AR' && props.allowArgentina===false)\r\n        return false;\r\n    return true;\r\n};\r\n\r\nconst stripArgentina = (input) => {\r\n    //const { allowArgentina, ...others } = input;\r\n    //return others;\r\n    return input;\r\n};\r\n\r\n// const Country = stringTypeField( 'country', {component: Select, options: 'country', required: false, allowOption: allowCountry, stripProps: stripArgentina });\r\nconst Country = stringTypeField( 'country', {component: Radios, options: 'country', required: false, allowOption: allowCountry, stripProps: stripArgentina, showLabel: false, label: 'Country' });\r\n\r\nclass TaxForm extends React.PureComponent {\r\n\r\n    render () {\r\n        const Field = this.props.renderField;\r\n        const { value = {}, allowArgentina } = this.props;\r\n        const tax = value['taxRef'];\r\n        return (\r\n            <fieldset className=\"form-fieldset\">\r\n                <legend>{translate(this.props.name)}</legend>\r\n                {Field( TaxReferenceNo )}\r\n                <div style={{ display: 'inline-block', verticalAlign: 'top', width: '50%', paddingRight: '16px', boxSizing: 'border-box' }}>\r\n                    {Field( FirstName )}\r\n                    </div>\r\n                    <div style={{ display: 'inline-block', verticalAlign: 'top', width: '50%' }}>\r\n                    {Field( LastName )}\r\n                </div>\r\n                {Field( Gender )}\r\n                {Field( UserName, { required: !!tax } )}\r\n                {Field( Country, { allowArgentina, required: (this.props.requireCountry || false) } )}\r\n                {Field( ZipCode )}\r\n                {Field( Phones )}\r\n            </fieldset>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FormConnect( FormSection(TaxForm) );\r\n\r\n//  <Field {...Country} allowOption={this.allowCountry} />\r\n//  {Field(Country, { allowOption: this.allowCountry}) }\r\n","import React from 'react';\r\nimport {translate} from './AppConfig';\r\n\r\nexport default function FieldSet (props) {\r\n\r\n    return (\r\n        <fieldset className=\"form-fieldset\">\r\n            <legend aria-label={props['aria-label']}>{translate(props.name)}</legend>\r\n            {props.children}\r\n        </fieldset>\r\n    );\r\n}\r\n","import React from 'react';\r\nimport {stringTypeField} from '../validation/validateString';\r\nimport FormSection from '../FormSection';\r\nimport Select from '../components/Select';\r\n//import {translate} from \"../components/AppConfig\";\r\n\r\n// name/number + street ?\r\nconst Address1 = stringTypeField( 'address1', {maxLength: 35, required: true });\r\nconst Area = stringTypeField( 'address2', {maxLength: 35, required: false });\r\nconst City = stringTypeField( 'city', {maxLength: 35, required: false });\r\nconst Region = stringTypeField( 'region', {maxLength: 35, required: false, minLength: 2 });\r\nconst ZipCode = stringTypeField( 'zipCode', {maxLength: 12, autoComplete: 'postal-code', required: false, inputClass: 'narrow', minLength: 4 });\r\nconst Country = stringTypeField( 'country', {component: Select, options: 'country', required: true });\r\n\r\nexport function validateAddress (v) { // v, values, sectionProps, output, errors, path\r\n    v(Country);\r\n    v(Address1);\r\n    v(Area);\r\n    v(City);\r\n    v(Region);\r\n    v(ZipCode);\r\n}\r\n\r\nclass AddressSection extends React.PureComponent {\r\n\r\n    render () {\r\n        //const { children } = this.props;\r\n        const Field = this.props.renderField;\r\n        return ([\r\n            Field( Country ),\r\n            Field( Address1 ),\r\n            Field( Area ),\r\n            Field( City ),\r\n            Field( Region  ),\r\n            Field( ZipCode )\r\n        ]);\r\n    }\r\n\r\n}\r\n\r\nexport default FormSection(AddressSection);\r\n\r\n/*\r\n            <fieldset className=\"form-fieldset\">\r\n                <legend>{translate(this.props.name)}</legend>\r\n                {Field( City )}\r\n                {Field( Region )}\r\n                {Field( ZipCode )}\r\n                {Field( Country )}\r\n                {children}\r\n            </fieldset>\r\n\r\nconst nod = {\r\n    div: { className: 'h3',\r\n        children: [\r\n            { heading: { kind: 'h3', text: 'props.title' } },\r\n            { field: 'City' },\r\n            { field: 'Region' }\r\n        ]\r\n    }\r\n};\r\n*/\r\n","import React from \"react\";\r\nimport {translate} from './AppConfig';\r\n\r\nexport default function CheckBox ({ id, value, label, onChange, className = 'checkbox', ...rest }) {\r\n\r\n    //function onClick () {\r\n    //    document.getElementById(id).focus();\r\n    //}\r\n\r\n    return (\r\n        <div className={className}>\r\n            <input\r\n                {...rest}\r\n                checked={!!value}\r\n                id={id}\r\n                onChange={ () => onChange({ target: { value: !value } }) }\r\n                onClick={onClickRadio}\r\n                type=\"checkbox\"\r\n            />\r\n            <label htmlFor={id}>{translate(label)}</label>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction onClickRadio (ev) {\r\n    ev.target.focus();\r\n}\r\n\r\n/*\r\n    checked is set if the value passed in is truthy\r\n\r\n    onChange is called with a boolean target.value\r\n\r\n    required is not set, due to warning:\r\n    The attribute aria-required is not supported by the role checkbox. This role is implicit on the element input  jsx-a11y/role-supports-aria-props\r\n\r\n*/\r\n","import React from \"react\";\r\nimport Select from \"../components/Select\";\r\nimport validateString from \"../validation/validateString\";\r\n\r\nfunction validateCombo (value, props, path, output) {\r\n    if (!value) value = {};\r\n    const { name, required, minLength, maxLength } = props;\r\n    const x = validateString(value.country, { name, required }, path, output);\r\n    if (x && x.error) {\r\n        x.part = 'country';\r\n        return x;\r\n    }\r\n    const r = validateString(value.phone, { name, required, minLength, maxLength }, path, output); // only pass input props\r\n    // if (r && r.error) r.part = 'phone';\r\n    return r;\r\n}\r\n\r\nexport const comboTypeField = (name,props) => { return { name, ...props, validator: validateCombo, component: ComboField } };\r\n\r\nfunction ComboField (props) {\r\n\r\n    const value = props.value || {}; // value may be '' which breaks IE11\r\n    const { id, onChange, onBlur, options, minLength, maxLength, required } = props;\r\n    const defs = { required, 'aria-describedby': props['aria-describedby'] };\r\n\r\n    const onPartChange = (item) => (ev) => {\r\n        onChange({ target: { value: { ...value, [item]: ev.target.value } } });\r\n    };\r\n\r\n    let timer;\r\n\r\n    function onBlurField (ev) {\r\n        timer = handleBlur(ev,id,onBlur);\r\n    }\r\n\r\n    function onFocusField () {\r\n        clearTimeout(timer);\r\n    }\r\n\r\n    // TODO component without label needs aria-label - in this case country - or use aria-labelledby ?\r\n\r\n    return (\r\n        <div>\r\n            <span style={{ display: 'inline-block', verticalAlign: 'top', marginRight: '10px' }} >\r\n                <Select value={value.country || ''} onChange={onPartChange('country')} onBlur={onBlurField} onFocus={onFocusField} id={id+'-country'} options={options} {...defs}/>\r\n            </span>\r\n            <span style={{ display: 'inline-block', verticalAlign: 'top' }} >\r\n                <input value={value.phone || ''} onChange={onPartChange('phone')} onBlur={onBlurField} onFocus={onFocusField} id={id} type=\"text\" minLength={minLength} maxLength={maxLength} {...defs}/>\r\n            </span>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction handleBlur (ev, id, onBlur) {\r\n    const elem = ev.relatedTarget || document.activeElement;\r\n    if (elem && elem.id) {\r\n        if (!(elem.id===id || elem.id.startsWith(id+'-'))) {\r\n            onBlur();\r\n        }\r\n        return;\r\n    }\r\n    // use a timer to blur - can be reset on a focus event\r\n    return setTimeout(onBlur,25);\r\n}\r\n","import React from 'react';\r\n\r\nexport default function Button ({ children, id, onClick, cnm = 'default' }) {\r\n    return <button className={\"btn btn-\"+cnm} id={id} onClick={onClick} type=\"button\">{children}</button>;\r\n}\r\n","\r\n/** the entry point for validating an object\r\n *\r\n * @param sectionProps must have a method validateSection()\r\n * @param values will be passed to validateSection\r\n * @param output a {} or []\r\n * @param errors an array [] for errors\r\n * @param path the route to this in the tree, ie 'personalDetails-homeAddress' or 'additionalDriver-2-nameDetails'\r\n * @returns {void|boolean|*}\r\n */\r\n\r\nexport function validateTree (sectionProps, values, output, errors, path) {\r\n\r\n    function validateChild (child, extraProps) {\r\n        child = extraProps ? {...child, ...extraProps} : child; // merge optional extraProps\r\n        const name = child.name;\r\n        if (child.validateSection) {  // its a section, which contains fields, it can append to errors\r\n            if (name!==undefined) {\r\n                const childOutput = child.isArray ? [] : {};\r\n                const r = validateTree(child, values && values[name], childOutput, errors, path + '-' + name);\r\n                if (r!==false) {\r\n                    output[name] = childOutput;\r\n                }\r\n            } else { // a nameless section - contains fields which output to it's parent\r\n                validateTree(child, values, output, errors, path);\r\n            }\r\n        } else { // its a field, it can return a single error\r\n            const fieldValue = values && values[name];\r\n            //child.validator(fieldValue, child, output, errors, path);\r\n\r\n            const resp = child.validator(fieldValue, child, path, output);\r\n            if (resp && resp.error) errors.push( resp );\r\n            return resp;\r\n        }\r\n    }\r\n\r\n    return sectionProps.validateSection(validateChild, values, sectionProps, output, errors, path);\r\n}\r\n\r\n/** experi\r\n *\r\n * @param v\r\n * @param values\r\n * @param props\r\n * @param output\r\n * @param errors\r\n * @param path\r\n * @returns {boolean}\r\n */\r\n\r\nexport function validateArraySection (v, values, props, output, errors, path) {  // props: minLength, maxLength\r\n    const len = values ? values.length : 0;\r\n    const name = props.name;\r\n    if (props.maxLength && len > props.maxLength) {\r\n        errors.push({name, path, maxLength: props.maxLength});\r\n        return false;\r\n    }\r\n    if (values) {\r\n        values.forEach((row, index) => {\r\n            v(props.foobar, {name: index}); // TODO wtf foobar\r\n        });\r\n    }\r\n    if (len < props.minLength) {\r\n        errors.push({name, path, minLength: props.minLength});\r\n    }\r\n}\r\n\r\n/* Useful general validation functions */\r\n\r\nconst num = new RegExp(/^\\d+$/);\r\n\r\nexport function isNumeric(value) {\r\n    return num.test(value);\r\n}\r\n\r\nconst alphanum = new RegExp(/^[a-z0-9]+$/i);\r\n\r\nexport function isAlphaNumeric(value) {\r\n    return alphanum.test(value);\r\n}\r\n","import React from 'react';\r\nimport FormSection from '../FormSection';\r\nimport Select from '../components/Select';\r\nimport {stringTypeField} from \"../validation/validateString\";\r\nimport {makeContactSection} from \"./ContactSection\";\r\nimport Button from \"../components/Button\";\r\nimport {validateTree} from \"../validation\";\r\n\r\nconst RoomsRequired = stringTypeField( 'roomsRequired', {component: Select, required: true, rangeFrom: 1, rangeTo: 6, inputClass: 'narrow' });\r\n\r\nfunction validateRoomCount (v,value = {}) {\r\n    v(RoomsRequired);\r\n    v(ListOfRooms,{ listLength: value.roomsRequired });\r\n    return true;\r\n}\r\n\r\nfunction RoomCountSection (props) {\r\n\r\n    function doReset () {\r\n        props.setShowErrors(false);\r\n        props.parent.onChangeField(props.name,{});\r\n        props.parent.onBlurField(props.name,{});\r\n    }\r\n\r\n    const vlid = () => {\r\n        console.log(props.value);\r\n        const output = {};\r\n        const errors = [];\r\n        validateTree({ validateSection: validateRoomCount },props.value,output,errors,'paymentPage-checkOutForm');\r\n        console.log('OUTPUT',output);\r\n        console.log('ERRORS',errors);\r\n        props.setShowErrors(true);\r\n    };\r\n\r\n    const { value = {} } = props;\r\n    const { roomsRequired } = value;\r\n    const Field = props.renderField;\r\n\r\n    return (\r\n        <div>\r\n            {Field( RoomsRequired )}\r\n            {Field( ListOfRooms, { listLength: roomsRequired } )}\r\n            <br/>\r\n            <Button cnm=\"primary\" onClick={vlid}>Validate</Button>\r\n            <Button onClick={() => props.setShowErrors(false)}>Clear</Button>\r\n            <Button onClick={doReset}>Reset</Button>\r\n        </div>\r\n    );\r\n\r\n}\r\n\r\nexport default FormSection(RoomCountSection);\r\n\r\n// experimental from here...\r\n\r\nclass FormList extends React.PureComponent {\r\n\r\n    render () {\r\n        const { listLength, renderField, repeatThing, fixedList, value = [] } = this.props;\r\n        const cc = fixedList ? value.length : parseInt(listLength);\r\n        if (!cc)\r\n            return null;\r\n\r\n        const arr = [];\r\n        for(let n=0;n<cc;n++) {\r\n            arr.push( renderField({ ...repeatThing, name: String(n) }) );\r\n        }\r\n\r\n        return (\r\n            <div>\r\n                {arr}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst ListOfThings = FormSection(FormList,true);\r\n\r\nfunction validateList (v, value, sectionProps) { // v, values, sectionProps, output, errors, path\r\n    const { listLength, fixedList, repeatThing } = sectionProps;\r\n    const cc = fixedList ? value.length : parseInt(listLength);\r\n    for(let n=0;n<cc;n++) {\r\n        v( repeatThing, { name: String(n) } );\r\n    }\r\n    return true;\r\n}\r\n\r\nfunction makeRepeatable (name, repeatThing) {\r\n    return { name, component: ListOfThings, validateSection: validateList, repeatThing, isArray: true };\r\n}\r\n\r\n// in use\r\n\r\n//const RoomNumber = stringTypeField('roomNumber',{ required: true });\r\nconst RoomNumber = makeContactSection();\r\n\r\n// const ListOfRooms = { name: 'roomList', component: ListOfThings, validateSection: () => {}, repeatThing: RoomNumber };\r\nconst ListOfRooms = makeRepeatable('roomList', RoomNumber );\r\n\r\n","import React from \"react\";\r\nimport FormSection from '../FormSection';\r\nimport FormConnect from '../FormConnect';\r\nimport FieldSet from '../components/FieldSet';\r\n\r\nimport AddressSection, {validateAddress} from \"./AddressSection\";\r\nimport ContactSection, {validateContactSection} from \"./ContactSection\";\r\nimport Select from \"../components/Select\";\r\nimport CheckBox from \"../components/CheckBox\";\r\nimport {stringTypeField} from \"../validation/validateString\";\r\nimport {comboTypeField} from './ComboField';\r\nimport RoomCount from './RoomCount';\r\n\r\n// fields\r\n\r\nconst CarsInHouse = stringTypeField( 'carsInHouse', {component: Select, required: true, rangeFrom: 0, rangeTo: 4, inputClass: 'narrow' });\r\nconst ParkingSpaces = stringTypeField( 'parkingSpaces', {component: Select, required: false, rangeFrom: 0, rangeTo: 2, inputClass: 'narrow' });\r\nconst AgeRetire = stringTypeField( 'preferredRetireAge', {component: Select, required: false, rangeFrom: 70, rangeTo: 55, inputClass: 'narrow' });\r\nconst ConsentSMS = { name: 'consentSMS', component: CheckBox, showLabel: false, label: 'Please send me SMS messages about the progress of my application.' };\r\nconst ConsentEmail = { name: 'consentEmail', component: CheckBox, showLabel: false, label: 'Sign me up for regular email alerts.' };\r\nconst ConsentOth = { name: 'consentOther', component: CheckBox, showLabel: false, label: 'Other consent option.' };\r\nconst Thingy = comboTypeField('regNumber',{ options: 'country', required: false, minLength: 4, maxLength: 12 });\r\nconst Whatever = comboTypeField('langCode',{ options: 'languages', required: true, minLength: 4, maxLength: 12 });\r\n\r\n// declare sections\r\n\r\nconst HomeAddress = { name: 'homeAddress', component: AddressSection, validateSection: validateAddress };\r\nconst OverseasAddress = { name: 'overseasAddress', component: AddressSection, validateSection: validateAddress };\r\nconst WorkAddress = { name: 'workAddress', component: AddressSection, validateSection: validateAddress };\r\n\r\nconst HomePhones = { name: 'contactHome', component: ContactSection, validateSection: validateContactSection };\r\nconst OverseasPhones = { name: 'contactOver', component: ContactSection, validateSection: validateContactSection };\r\n\r\nconst RoomsSection = { name: 'rooms', component: RoomCount, validateSection: () => {} };\r\n\r\nclass BigForm extends React.PureComponent {\r\n\r\n    render () {\r\n        const Field = this.props.renderField;\r\n        return (\r\n            <div>\r\n                <FieldSet name=\"Rooms\" aria-label=\"List of rooms and contacts\">\r\n                    {Field( RoomsSection )}\r\n                </FieldSet>\r\n                <FieldSet name=\"About you\">\r\n                    {Field( CarsInHouse )}\r\n                    {Field( ParkingSpaces )}\r\n                    {Field( AgeRetire )}\r\n                    <div style={{ marginTop: '16px' }}>\r\n                    {Field( ConsentSMS )}\r\n                    {Field( ConsentEmail )}\r\n                    {Field( ConsentOth )}\r\n                    {Field( Thingy )}\r\n                    {Field( Whatever )}\r\n                    </div>\r\n                </FieldSet>\r\n                <FieldSet name=\"homeAddress\">\r\n                    {Field( HomeAddress )}\r\n                    {Field( HomePhones )}\r\n                </FieldSet>\r\n                <FieldSet name=\"overseasAddress\">\r\n                    {Field( OverseasAddress )}\r\n                    {Field( OverseasPhones )}\r\n                </FieldSet>\r\n                <FieldSet name=\"workAddress\">\r\n                    {Field( WorkAddress )}\r\n                </FieldSet>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FormConnect( FormSection(BigForm) );\r\n","import React from 'react';\r\nimport logo from '../logo.svg';\r\nimport store from \"../startRedux\";\r\nimport TaxForm from '../sections/TaxForm3';\r\nimport BigForm from '../sections/BigForm';\r\nimport PageRouter from '../components/PageRouter';\r\nimport Button from \"../components/Button\";\r\n\r\nexport default class HomePage extends React.Component {\r\n\r\n    render() {\r\n\r\n        const clk = () => {\r\n            console.log(store.getState().formState);\r\n            PageRouter.changePage('/tax-app/search');\r\n            return false;\r\n        };\r\n\r\n        function reset () {\r\n            console.log(store.getState().formState);\r\n            alert('reset todo');\r\n        }\r\n\r\n        return (\r\n            <div className=\"App bg-light\">\r\n                <header className=\"App-header\">\r\n                    <img src={logo} className=\"App-logo\" alt=\"logo\"/>\r\n                    <h1 className=\"App-title\">Tax calculator application.</h1>\r\n                </header>\r\n                <form>\r\n                    <TaxForm path=\"mainForm\" name=\"personalRef\" requireCountry/>\r\n                    <TaxForm path=\"mainForm\" name=\"spouseRef\" allowArgentina={false}/>\r\n                    <BigForm path=\"mainForm\" name=\"bigForm\" />\r\n                    <p style={{ textAlign: 'right' }}>\r\n                        <Button onClick={() => PageRouter.changePage('/tax-app/search')} >Search</Button>\r\n                        <Button cnm=\"secondary\" onClick={reset} >Reset</Button>\r\n                        <Button cnm=\"primary\" onClick={clk}>Continue</Button>\r\n                    </p>\r\n                </form>\r\n                <p className=\"App-intro\">\r\n                    Thank you\r\n                </p>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nexport default function IconLang (props) {\r\n    return (\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"#fff\" {...props}>\r\n            <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n            <path d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z\"/>\r\n        </svg>\r\n    );\r\n}\r\n\r\n// baseline-language-24px.svg\r\n// https://material.io/tools/icons/?icon=language&style=baseline\r\n","import React from \"react\";\r\nimport './Loader.css';\r\n\r\nexport default function Loader ({ text }) {\r\n\r\n    text = text || 'Page loading...';\r\n\r\n    setTimeout( () => {\r\n        const p = document.getElementById('loader-text');\r\n        if (p) p.focus();\r\n    }, 200);\r\n\r\n    return (\r\n        <div className=\"loader-body\">\r\n            <div className=\"loader-container\">\r\n                <div className=\"loader\">\r\n                    <div className=\"loader antiloader\">\r\n                        <div className=\"loader\" style={{ animation: 'spin 0.8s linear infinite'}} />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <span className=\"loader-text\" aria-live=\"assertive\" id=\"loader-text\" tabIndex=\"-1\">{text}</span>\r\n        </div>\r\n    );\r\n}\r\n\r\n// <span className=\"loader-text\" aria-live=\"assertive\" id=\"loader-text\" role=\"alert\" tabIndex=\"-1\">{text}</span>\r\n\r\n// https://www.w3schools.com/code/tryit.asp?filename=FVAC6056923W\r\n\r\n// ovals\r\n// https://www.w3schools.com/code/tryit.asp?filename=FVAERQGFA5PJ\r\n\r\n// psychedelic\r\n// https://www.w3schools.com/code/tryit.asp?filename=FVAED5JFVIO5\r\n\r\n// delays\r\n// https://www.w3schools.com/code/tryit.asp?filename=FVC7MNJUM92B\r\n","import React from 'react';\r\n// import logo from '../logo.svg';\r\nimport store from \"../startRedux\";\r\nimport BigForm from '../sections/BigForm';\r\nimport PageRouter from '../components/PageRouter';\r\nimport IconLang from './IconLang';\r\nimport Loader from '../components/Loader';\r\nimport Button from \"../components/Button\";\r\n\r\nexport default class SearchPage extends React.Component {\r\n\r\n    goHomePage = () => {\r\n        this.setState({ loading: true });\r\n        setTimeout( () => {\r\n            window.scrollTo(0,0);\r\n            PageRouter.changePage('/tax-app');\r\n        }, 3000);\r\n    };\r\n\r\n    render() {\r\n\r\n        const clk = () => {\r\n            console.log(store.getState().formState);\r\n            PageRouter.changePage('/tax-app/checkout');\r\n            return false;\r\n        };\r\n\r\n        const loading = this.state && this.state.loading;\r\n        const mainDivProps = loading ? { 'aria-disabled': true, 'aria-hidden': true, className: 'loader-blur' } : {};\r\n\r\n        return (\r\n            <div className=\"App bg-light\">\r\n                <div {...mainDivProps}>\r\n                    <header className=\"App-header\">\r\n                        <h1 className=\"App-title\">\r\n                            <IconLang style={{ verticalAlign: 'top' }}/>\r\n                            {' '}\r\n                            Search page\r\n                        </h1>\r\n                    </header>\r\n                    <form>\r\n                        <BigForm path=\"mainForm\" name=\"bigForm\" />\r\n                        <p style={{ textAlign: 'right' }}>\r\n                            <Button onClick={this.goHomePage} >Home page</Button>\r\n                            <Button cnm=\"primary\" onClick={clk}>Continue</Button>\r\n                        </p>\r\n                    </form>\r\n                    <p className=\"App-intro\">\r\n                        Thank you\r\n                    </p>\r\n                </div>\r\n                {loading && <Loader/>}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\n// import {translate, getOptionList, getOptionDescriptions} from './AppConfig';\r\nimport './PhoneInput.scss';\r\nimport validateString from \"../validation/validateString\";\r\n\r\nconst DEF_CODE = '44';\r\n\r\nexport const phoneTypeField = (name,props) => { return { name, component: PhoneInput, validator: validatePhone, ...props } };\r\n\r\nexport function validatePhone (value, props, path, output) {\r\n    const { name, required } = props;\r\n    if (value && value.tel) {\r\n        const err = validateString(value.tel,props,path);\r\n        if (err.error)\r\n            return err;\r\n        if (output)\r\n            output[name] = value;\r\n        return true;\r\n    } else if (required) {\r\n        return { name, path, required, error: 'required' };\r\n    }\r\n}\r\n\r\nexport default class PhoneInput extends React.Component {\r\n\r\n    docClick = (ev) => {\r\n        console.log('DOC CLICK');\r\n        this.setState({ pop: false });\r\n        document.removeEventListener('click',this.docClick);\r\n    };\r\n\r\n    btn = () => {\r\n        const state = this.state || {};\r\n        this.setState({ pop: !state.pop });\r\n        if (!state.pop) {\r\n            document.addEventListener('click',this.docClick);\r\n        }\r\n    };\r\n\r\n    setCo (ev,co) {\r\n        ev.preventDefault();\r\n        const value = this.props.value || {};\r\n        const val = { tel: '', ...value, code: co };\r\n        this.props.onChange({ target: { value: val } });\r\n        this.btn();\r\n        document.getElementById(this.props.id+'-picker').focus();\r\n        //return false;\r\n    }\r\n\r\n    telChange = (ev) => {\r\n        const value = this.props.value || {};\r\n        const val = { code: DEF_CODE, ...value, tel: ev.target.value };\r\n        this.props.onChange({ target: { value: val } });\r\n    };\r\n\r\n    render () {\r\n        const { value = {}, id, onBlur, minLength, maxLength, required } = this.props;\r\n        const state = this.state || {};\r\n        return (\r\n            <div className=\"phone-input\">\r\n                <button\r\n                    aria-label={'Country code'}\r\n                    id={id+'-picker'}\r\n                    onClick={this.btn}\r\n                    type=\"button\"\r\n                    onFocus={this.docClick}\r\n                >\r\n                    +{value.code || DEF_CODE}\r\n                </button>\r\n                {state.pop &&\r\n                    <div className=\"telpopup\">\r\n                        <a href=\"/\" onClick={(ev) => this.setCo(ev,'44')}>44 United Kingdom</a>\r\n                        <a href=\"/\" onClick={(ev) => this.setCo(ev,'47')}>47 Norway</a>\r\n                        <a href=\"/\" onClick={(ev) => this.setCo(ev,'01')}>01 United States of America</a>\r\n                        <a href=\"/\" onClick={(ev) => this.setCo(ev,'86')}>86 China</a>\r\n                    </div>\r\n                }\r\n                <input\r\n                    aria-describedby={this.props['aria-describedby']}\r\n                    id={id}\r\n                    maxLength={maxLength}\r\n                    minLength={minLength}\r\n                    required={required}\r\n                    type=\"tel\"\r\n                    onBlur={onBlur}\r\n                    onChange={this.telChange}\r\n                    onFocus={this.docClick}\r\n                    value={value.tel || ''}\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from 'react';\r\nimport './popup.scss';\r\nimport Button from \"../components/Button\";\r\n\r\nexport default function TestPop ({ parent }) {\r\n\r\n    function eat (ev) {\r\n        ev.stopPropagation();\r\n    }\r\n\r\n    function switchPopup () {\r\n        parent.setState({ popup: 2 });\r\n    }\r\n\r\n    function onClose () {\r\n        parent.setState({ popup: 0 });\r\n        foc('ShowPopup');\r\n    }\r\n\r\n    function fadeOut () {\r\n        const p = document.getElementById('exampleModalLive');\r\n        p.classList.add('modal-hiding');\r\n        setTimeout( () => { onClose(); }, 300 );\r\n    }\r\n\r\n    const title = 'Cancel this purchase?';\r\n    const content = (\r\n        <>\r\n            <p>You can cancel this purchase now.</p>\r\n            <p>Your basket will be empty of products</p>\r\n        </>\r\n    );\r\n\r\n    setTimeout( () => { foc('exampleModalLive'); }, 100); // focus to modal\r\n\r\n    return (\r\n        <>\r\n            <div id=\"exampleModalLive\" className=\"modal show\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLiveLabel\" style={{ display: 'block' }}\r\n                onClick={fadeOut}\r\n            >\r\n                <div className=\"modal-dialog\" role=\"document\">\r\n                    <div className=\"modal-content\" onClick={eat}>\r\n                        <div className=\"modal-header\" tabIndex=\"0\" onFocus={() => foc('closePop')}>\r\n                            <h5 className=\"modal-title\" id=\"exampleModalLiveLabel\">{title}</h5>\r\n                            <button type=\"button\" className=\"close\" aria-label=\"Close\" onClick={onClose}>\r\n                                <span aria-hidden=\"true\"></span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            {content}\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <Button id=\"closePop\" onClick={fadeOut}>Cancel</Button>\r\n                            <button type=\"button\" className=\"btn btn-secondary\" onClick={switchPopup}>Next</button>\r\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={fadeOut}>Save changes</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"modal-backdrop\" tabIndex=\"0\" onFocus={() => foc('closePop')}/>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction foc (id) {\r\n    const p = document.getElementById(id);\r\n    if (p) p.focus();\r\n}\r\n","import React from 'react';\r\nimport './popup.scss';\r\nimport Select from \"../components/Select\";\r\nimport Button from \"../components/Button\";\r\n\r\nexport default function PickerPop ({ parent, popupCode }) {\r\n\r\n    function eat (ev) {\r\n        ev.stopPropagation();\r\n    }\r\n\r\n    function backPopup () {\r\n        parent.setState({ popup: 1 });\r\n    }\r\n\r\n    function nextPopup () {\r\n        parent.setState({ popup: popupCode===2 ? 3 : 2 });\r\n    }\r\n\r\n    function onClose () {\r\n        parent.setState({ popup: false });\r\n        foc('ShowPopup');\r\n    }\r\n\r\n    function fadeOut () {\r\n        const p = document.getElementById('exampleModalLive');\r\n        p.classList.add('modal-hiding');\r\n        setTimeout( () => { onClose(); }, 300 );\r\n    }\r\n\r\n    function onLang (ev) {\r\n        console.log('LANG',ev.target.value);\r\n    }\r\n\r\n    const title = 'Choose your language';\r\n    const content2 = (\r\n        <>\r\n            <p>Pick a language</p>\r\n            <Select options=\"languages\" onChange={onLang}/>\r\n        </>\r\n    );\r\n    const content3 = <p>Another popup</p>;\r\n\r\n    setTimeout( () => { foc('exampleModalLive'); }, 100); // focus to modal\r\n\r\n    return (\r\n        <>\r\n            <div id=\"exampleModalLive\" className=\"modal show\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLiveLabel\" style={{ display: 'block' }}\r\n                onClick={fadeOut}\r\n            >\r\n                <div className=\"modal-dialog\" role=\"document\">\r\n                    <div className=\"modal-content\" onClick={eat}>\r\n                        <div className=\"modal-header\" tabIndex=\"0\" onFocus={() => foc('closePop')}>\r\n                            <h5 className=\"modal-title\" id=\"exampleModalLiveLabel\">{title}</h5>\r\n                            <button type=\"button\" className=\"close\" aria-label=\"Close\" onClick={onClose}>\r\n                                <span aria-hidden=\"true\"></span>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"modal-body\">\r\n                            {popupCode===2 ? content2 : content3}\r\n                        </div>\r\n                        <div className=\"modal-footer\">\r\n                            <Button id=\"closePop\" onClick={fadeOut}>Cancel</Button>\r\n                            <button type=\"button\" className=\"btn btn-secondary\" onClick={backPopup}>Back</button>\r\n                            <button type=\"button\" className=\"btn btn-secondary\" onClick={nextPopup}>Next</button>\r\n                            <button type=\"button\" className=\"btn btn-primary\" onClick={fadeOut}>Change language</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"modal-backdrop\" tabIndex=\"0\" onFocus={() => foc('closePop')}/>\r\n        </>\r\n    );\r\n}\r\n\r\nfunction foc (id) {\r\n    const p = document.getElementById(id);\r\n    if (p) p.focus();\r\n}\r\n","import React from 'react';\r\nimport logo from '../logo.svg';\r\nimport PageRouter from '../components/PageRouter';\r\nimport FormConnect from \"../FormConnect\";\r\nimport FormSection from \"../FormSection\";\r\nimport CheckBox from \"../components/CheckBox\";\r\nimport Button from \"../components/Button\";\r\nimport Loader from '../components/Loader';\r\nimport {phoneTypeField} from '../components/PhoneInput';\r\n\r\nimport TestPopup from './TestPopup';\r\nimport PickerPopup from './PickerPopup';\r\n\r\nimport {stringTypeField} from \"../validation/validateString\";\r\nimport {validateTree} from '../validation';\r\n\r\nfunction validateBool (value, props, path, output) {\r\n    const { name, required } = props;\r\n    if (required && !value) {\r\n        return { name, path, required, error: 'required' };\r\n    }\r\n    if (output) {\r\n        output[name] = !!value;\r\n    }\r\n    return true;\r\n}\r\n\r\n// declare fields\r\n\r\nconst CardNumber = stringTypeField( 'cardNumber', { minLength: 16, maxLength: 16, type: 'tel', required: true });\r\nconst CVV = stringTypeField( 'cvvNumber', { minLength: 3, maxLength: 4, type: 'tel', required: true, inputClass: 'tiny', pattern: '^[0-9]+$' });\r\nconst NameOnCard = stringTypeField( 'nameOnCard', {maxLength: 40, minLength: 4, inputClass: 'upper-case', required: true, spellCheck: false, pattern: '^[a-zA-Z ]+$' });\r\nconst ConsentSMS = { name: 'smsTrack', component: CheckBox, showLabel: false, label: 'Please send me SMS messages to track my order.', required: true, validator: validateBool };\r\n\r\nconst EmoField = phoneTypeField('emergencyPhone', { maxLength: 12, minLength: 4, required: true, pattern: '^[0-9]+$' });\r\nconst FaxField = phoneTypeField('faxNo', { maxLength: 10, minLength: 6 });\r\n\r\nfunction validatePaymentPage (v /*, values, sectionProps, output, errors, path */) {\r\n    v(CardNumber);\r\n    v(CVV);\r\n    v(NameOnCard);\r\n    v(ConsentSMS);\r\n    return true;\r\n}\r\n\r\n// page class\r\n\r\nclass PaymentPage extends React.Component {\r\n\r\n    static defaultProps = {\r\n        name: 'checkOutForm',\r\n        path: 'paymentPage'\r\n    };\r\n\r\n    componentWillMount () {             // unsafe, use static getDerivedStateFromProps(nextProps, prevState)\r\n        const { name } = this.props;\r\n        this.props.updateRedux({ type: 'SET', key: name+'_T', value: {} });\r\n    }\r\n\r\n    componentDidUpdate (prevProps, prevState, snapshot) { // prevProps, prevState, snapshot\r\n        //console.log('DID UPTATE');\r\n        const { inputErrors, } = (this.state || {});\r\n        if (inputErrors!==(prevState && prevState.inputErrors)) {\r\n            // const p = document.getElementById('theErrors');\r\n            // if (p) p.focus();\r\n            // focus to error?\r\n            // this.focusToFirstError();\r\n        }\r\n    }\r\n\r\n    focusToFirstError (errors) {\r\n        if (!errors) errors = this.state.errors || []; // const { errors = [] } = (this.state || {});\r\n        const err = errors[0];\r\n        if (err) {\r\n            const id = err.path+'-'+err.name;\r\n            const p = document.getElementById(id);\r\n            if (p) p.focus();\r\n        }\r\n    }\r\n\r\n    doCheckout = () => {\r\n        const output = {};\r\n        const errors = [];\r\n        validateTree({ validateSection: validatePaymentPage },this.props.value,output,errors,'paymentPage-checkOutForm');\r\n        console.log('OUTPUT',output);\r\n        console.log('ERRORS',errors);\r\n\r\n        if (output.smsTrack) {\r\n            console.log('CHGECKOUT', this.props.value);\r\n            this.setState({ inputErrors: undefined });\r\n            makePayment(this, this.props.value);\r\n        } else {\r\n            // show errors\r\n            this.setState({ inputErrors: Date.now(), errors });\r\n            this.props.setShowErrors(true);\r\n            this.focusToFirstError(errors);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        const Field = this.props.renderField;\r\n\r\n        const { loading, message, popup } = this.state || {};\r\n        const dprops = loading ? { 'aria-disabled': true, 'aria-hidden': true, className: 'loader-blur' } : {};\r\n\r\n        const { inputErrors } = (this.state || {});\r\n\r\n        const link = (e) => {\r\n            this.setState({ inputErrors: undefined, errors: [] });\r\n            this.props.setShowErrors(false);\r\n            alert('!!!');\r\n            e.preventDefault();\r\n            return false;\r\n        };\r\n\r\n        return (\r\n            <div className=\"App\">\r\n                <div {...dprops}>\r\n                    <header className=\"App-header\">\r\n                        <img src={logo} className=\"App-logo\" alt=\"logo\"/>\r\n                        <h1 className=\"App-title\">Checkout</h1>\r\n                    </header>\r\n                    <form>\r\n                        <h2>Your payment details</h2>\r\n                        {Field( CardNumber )}\r\n                        {Field( CVV )}\r\n                        {Field( NameOnCard )}\r\n                        <br/>\r\n                        {Field( ConsentSMS )}\r\n\r\n                        {inputErrors &&\r\n                            <div id=\"theErrors\" tabIndex=\"0\" className=\"alert alert-primary\">\r\n                                Please correct errors and continue {inputErrors}\r\n                                <a href=\"/\" onClick={link} tabIndex=\"0\">Please enter a valid credit card number</a>\r\n                                <a href=\"/\" onClick={link} tabIndex=\"0\">Please enter the CVV number</a>\r\n                            </div>\r\n                        }\r\n\r\n                        <p style={{ textAlign: 'right', marginTop: '12px' }}>\r\n                            <Button onClick={() => { window.history.back(); }}>Cancel</Button>\r\n                            <Button id=\"ShowPopup\" onClick={() => { this.setState({ popup: 1 }); }}>Popup</Button>\r\n                            <Button cnm=\"primary\" onClick={this.doCheckout} >Make Payment</Button>\r\n                        </p>\r\n                        <p className=\"App-intro\">\r\n                            Terms & conditions\r\n                            etc here\r\n                        </p>\r\n\r\n                        {Field( EmoField )}\r\n                        {Field( FaxField )}\r\n\r\n                        <p>&nbsp;</p>\r\n                        <p>Thank you for your patience</p>\r\n                    </form>\r\n                </div>\r\n                {loading && <Loader text={message}/>}\r\n                {popup===1 && <TestPopup parent={this}/>}\r\n                {popup>=2 && <PickerPopup parent={this} popupCode={popup}/>}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default FormConnect( FormSection(PaymentPage) );\r\n\r\n// #######################   promise code   ###################################\r\n\r\nfunction makePayment (page, values) {\r\n    page.setState({ loading: true, message: 'Checking payment details...' });\r\n    sendPayment(values)\r\n        .then( (res) => showStatus(res, page, 'Checking stock and delivery schedule') )\r\n        .then( (res) => sendPayment(res) )\r\n        .then( (res) => showStatus(res, page, 'Transferring funds') )\r\n        .then( (res) => sendPayment(res) )\r\n        .then( (res) => showStatus(res, page, '', false) )\r\n        .then( (res) => paymentFinished(res,values) )\r\n        .catch( (e) => handleError(page,e) );\r\n}\r\n\r\nfunction showStatus (res, page, message, loading = true) {\r\n    page.setState({ message, loading });\r\n    return res;\r\n}\r\n\r\nfunction sendPayment (v) {\r\n    return new Promise( (resolve) => {\r\n        setTimeout( () => resolve(v), 1000 );\r\n    });\r\n}\r\n\r\nfunction paymentFinished (response, thing) {\r\n    console.log('paymentFinished',response);\r\n    if (!response || thing.cvvNumber==='666')\r\n        throw new Error('Validation of the CVV number failed');\r\n    window.scrollTo(0,0);\r\n    PageRouter.changePage('/tax-app');\r\n}\r\n\r\nfunction handleError (page, err) {\r\n    page.setState({ message: 'Error occurred' });\r\n    alert('An error occurred\\n'+err);\r\n    page.setState({ loading: false });\r\n}\r\n\r\n/*  TODO\r\n    what if user presses back button ?\r\n    promise will eventually resolve (or error)\r\n\r\n    state vs redux\r\n    press back then forward - should spinner still be there ?\r\n*/\r\n","import React from 'react';\nimport './App.scss';\nimport PageRouter from './components/PageRouter';\n// pages\nimport HomePage from './pages/HomePage';\nimport SearchPage from './pages/SearchPage';\nimport PaymentPage from './pages/PaymentPage';\n\nPageRouter.defineRoute('/',HomePage,'React tax application');\nPageRouter.defineRoute('/tax-app',HomePage,'React tax application');\nPageRouter.defineRoute('/tax-app/search',SearchPage,'React search page');\nPageRouter.defineRoute('/tax-app/deals',SearchPage,'React hot deals page');\nPageRouter.defineRoute('/tax-app/checkout',PaymentPage,'Checkout page');\n\nPageRouter.defineRoute(routePayment);\n\nexport default class App extends React.Component {\n\n    render() {\n        return <PageRouter/>\n    }\n}\n\n/*\n    wrap with this to see warnings:\n    <React.StrictMode>\n */\n\nfunction routePayment (pa) { // tax-app/payment/8437763\n    if (pa[1]==='payment') {\n        return {\n            Compo: PaymentPage,\n            title: 'Payment record {record}',\n            values: {\n                record: pa[2]\n            }\n        };\n    }\n}\n","import 'react-app-polyfill/ie11'; // has to be first\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './Fixers';\nimport './index.css';\nimport registerServiceWorker from './registerServiceWorker';\nimport {Provider} from 'react-redux'\nimport store from './startRedux';\n// this app\nimport { setTranslator, setGetOptionList, setGetOptionDescriptions } from './components/AppConfig';\nimport App from './App';\n\n// SET UP DEFAULTS\nsetTranslator( translate );\nsetGetOptionList( getOptionList );\nsetGetOptionDescriptions( getOptionDescriptions );\n\n// RENDER\n\nconst render = Root => {\n    ReactDOM.render(\n        <Provider store={store}><Root/></Provider>,\n        document.getElementById('root')\n    );\n};\n\nsetTimeout( () => render(App), 500 );  // always display loader for 1 sec\n// render(App);\n\nif (module.hot) {\n    module.hot.accept('./App', () => {\n        console.log('MOD HOT');\n        const NextApp = require('./App').default;\n        render(NextApp);\n    });\n}\n\n// PROGRESSIVE APP\n\nregisterServiceWorker();\n\n// HACK\nwindow.redux = store;\n\n// TODO move elsewhere POSSIBLY TO APP\n\nfunction translate (t,required) {\n    if (!t) return 'Undefined';\n    if (t.endsWith('country-pleaseSelect')) return required ? 'Choose a country' : 'No country selected';\n    if (t.endsWith('gender-pleaseSelect')) return 'Please select a gender';\n    if (t.endsWith('gender-required')) return 'Please choose a gender';\n    if (t.endsWith('-pleaseSelect')) return required ? 'Please choose' : 'Not specified';\n\n    if (t.endsWith('-address1')) return 'First line of address, for example house number and street';\n    if (t.endsWith('-address2')) return 'Second line of address';\n    if (t.endsWith('-city')) return 'City';\n    if (t.endsWith('-region')) return 'State or Province';\n    if (t.endsWith('-country')) return 'Country';\n    if (t.endsWith('-zipCode')) return 'Zip code';\n    if (t.endsWith('-firstName')) return 'First name';\n    if (t.endsWith('-lastName')) return 'Surname';\n    if (t.endsWith('-taxRef')) return 'Tax Reference Number';\n    if (t.endsWith('-username')) return 'User name';\n    if (t.endsWith('-gender')) return 'Gender';\n    if (t.endsWith('-homePhone')) return 'Home telephone';\n    if (t.endsWith('-mobilePhone')) return 'Mobile phone';\n    if (t.endsWith('-emailAddress')) return 'Email address';\n\n    if (t.endsWith('-carsInHouse')) return 'How many cars are there in your household?';\n    if (t.endsWith('-parkingSpaces')) return 'How many parking spaces do you have exclusive use of?';\n    if (t.endsWith('-preferredRetireAge')) return <span>What is your preferred retirement age? <b>(optional)</b></span>;\n\n    if (t.endsWith('-regNumber')) return 'Registration number and country';\n\n    if (t.endsWith('-cardNumber')) return 'Payment card number';\n    if (t.endsWith('-cvvNumber')) return 'CVV';\n    if (t.endsWith('-nameOnCard')) return 'Name on card';\n\n    if (t.endsWith('-emergencyPhone')) return 'Emergency contact number';\n    if (t.endsWith('-faxNo')) return 'Fax number';\n\n    const map = {\n        personalRef: 'Your personal details',\n        spouseRef: 'Your spouse details'\n    };\n    return map[t] || t;\n}\n\nfunction getOptionList (name) {\n    const map = {\n        yesno: ['M','F'],\n        gender: ['M','F'],\n        country: ['GB','US','CN','BW','AR'],\n        months: ['01','02','03','04','05','06','07','08','09','10','11','12'],\n        languages: ['en','zh','ru','fr']\n    };\n    return map[name] || ['Y','N'];\n}\n\nfunction getOptionDescriptions (name) {\n    const map = {\n        yesno: { Y: 'Yes', N: 'No'},\n        gender: { M: 'Male', F: 'Female'},\n        country: { GB: 'United Kingdom', US: 'United States', CN: 'China', BW: 'Botswana', AR: 'Argentina' },\n        languages: { en: 'English', zh: 'Chinese', ru: 'Russian', fr: 'French' }\n    };\n    return map[name] || {};\n}\n\n// countries with translations\n// https://github.com/umpirsky/country-list/tree/master/data\n","module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";"],"sourceRoot":""}