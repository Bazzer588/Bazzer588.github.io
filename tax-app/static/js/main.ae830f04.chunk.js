(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t){String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Array.prototype.find||(Array.prototype.find=function(e){for(var t=this.length,a=0;a<t;a++)if(e(this[a]))return this[a]})},107:function(e,t,a){},112:function(e,t,a){},114:function(e,t,a){},116:function(e,t,a){},118:function(e,t,a){"use strict";a.r(t);a(66);var n=a(0),r=a.n(n),o=a(60),i=a.n(o),c=(a(106),a(107),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function l(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var s=a(28),u=a(14),d=a(7),m=a(17),p=a(64),h={coreData:{lang:"en"}};var f=Object(m.c)({formState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return Object(d.a)({},e,Object(u.a)({},t.key,t.value));case"CORE":return Object(d.a)({},e,{coreData:Object(d.a)({},e.coreData,t.data)});default:return e}}});var v=Object(m.d)(f,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(m.a)(p.a)),g=function(e){return e},b=function(){return[]},E=function(){return{}};var y=a(1),O=a(2),w=a(4),C=a(3),j=a(5),k=(a(112),{}),S={};function x(e,t,a){console.log("modPage",e,t),t&&window.scrollTo(0,0),a?window.history.replaceState(null,"",e):window.history.pushState(null,"",e);try{var n=new PopStateEvent("popstate",{state:{}});dispatchEvent(n)}catch(o){var r=document.createEvent("Event");r.initEvent("popstate",!1,!1),dispatchEvent(r)}}var N=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).listenForPopState=function(e){console.log("POPSTATE:",e),a.setState({dt:Date.now()})},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.listenForPopState)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.listenForPopState)}},{key:"render",value:function(){var e=window.location.pathname,t=e.split("/");t.splice(0,1),console.log("PATHSPLIT",t);var a=k[e]||k["/"],n=S[e]||S["/"];return n&&(document.title=n),r.a.createElement(a,{search:window.location.search})}}],[{key:"defineRoute",value:function(e,t,a){console.log("defineRoute",e,typeof e,typeof t,a),"function"===typeof e||(k[e]=t,S[e]=a)}},{key:"replacePage",value:function(e){x(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!0)}},{key:"changePage",value:function(e){x(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1])}}]),t}(r.a.Component),P=a(27),L=a.n(P),A=a(6),q=a(16),F=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).onBlur=function(){var e=a.props,t=e.touched,n=e.name,r=e.parent;t||r.onBlurField(n,!0,Object(A.a)(Object(A.a)(a)))},a.onChange=function(e){var t=e.target.value,n=a.props,r=n.name;n.parent.onChangeField(r,t,Object(A.a)(Object(A.a)(a)))},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.parent,e.coreData,e.name),a=e.path,n=e.showErrors,o=e.touched,i=e.required,c=e.showLabel,l=void 0===c||c,s=e.htmlId,u=e.inputClass,d=e.fieldClass,m=void 0===d?"":d,p=e.component,h=e.validator,f=e.stripProps,v=Object(q.a)(e,["parent","coreData","name","path","showErrors","touched","required","showLabel","htmlId","inputClass","fieldClass","component","validator","stripProps"]),b=p||"input",E=this.props.value||"",y=a+"-"+(s||t),O=a+"-"+t,w=(!!o||n)&&h&&h(E,this.props,a),C=w&&!!w.error,j=C?y+"-fieldError":void 0,k=f?f(v):v,S=C?"form-field ff-invalid":"form-field";return r.a.createElement("div",{className:S+" "+m},l&&r.a.createElement("label",{htmlFor:y},g(O,i)),r.a.createElement(b,Object.assign({"aria-describedby":j,"aria-invalid":C,className:u,id:y,onBlur:this.onBlur,onChange:this.onChange,required:i},k,{value:E})),C&&function(e,t){return r.a.createElement("span",{"aria-live":"assertive",className:"field-error",id:t},function(e,t){if(t)return t.minLength?"Please enter at least "+e.values.minLength+" characters":t.found?'Invalid email, character sequence "'+t.found+'" is not allowed':e.error+" "+JSON.stringify(t);return e.error}(e,e.values),e.required&&" *")}(w,j))}}]),t}(r.a.PureComponent);function R(e){var t=function(t){function a(e){var t;return Object(y.a)(this,a),(t=Object(w.a)(this,Object(C.a)(a).call(this,e))).setShowErrors=function(e){t.setState({showErrors:e})},t.testClick=function(e){var a=t.getWrappedInstance();console.log("NODE",a),a.testHit(e)},t.onBlurField=function(e,a){var n=t.props,r=n.touched,o=n.name,i=n.updateRedux,c=n.parent,l=Object(d.a)({},r,Object(u.a)({},e,a));i&&i({type:"SET",key:o+"_T",value:l}),c&&c.onBlurField(o,l,Object(A.a)(Object(A.a)(t)))},t.onChangeField=function(e,a){var n=t.props,r=n.value,o=n.name,i=n.updateRedux,c=n.parent,l=Object(d.a)({},r,Object(u.a)({},e,a));i&&i({type:"SET",key:o,value:l}),c&&c.onChangeField(o,l,Object(A.a)(Object(A.a)(t)))},t.renderField=function(e,a){var n=e.validateSection?e.component:F,o=t.props,i=o.name,c=o.path,l=o.touched,s=void 0===l?T:l,u=o.value,d=void 0===u?T:u,m=o.coreData,p=t.state.showErrors||t.props.showErrors;if(!i)return r.a.createElement(n,Object.assign({},e,a,{coreData:m,parent:Object(A.a)(Object(A.a)(t)),path:c,showErrors:p,touched:s,value:d}));var h=c?c+"-"+i:i;return r.a.createElement(n,Object.assign({},e,a,{coreData:m,key:h+"-"+e.name,parent:Object(A.a)(Object(A.a)(t)),path:h,showErrors:p,touched:s[e.name],value:d[e.name]}))},t.myRef=r.a.createRef(),t.state={},t}return Object(j.a)(a,t),Object(O.a)(a,[{key:"getWrappedInstance",value:function(){return this.myRef.current}},{key:"render",value:function(){return r.a.createElement(e,Object.assign({},this.props,{ref:this.myRef,renderField:this.renderField,setShowErrors:this.setShowErrors}))}}]),a}(r.a.PureComponent);return t.defaultProps=e.defaultProps,t}var T={},W={},I=function(e){return function(t){return t(e)}};function z(e){var t=e.defaultProps&&e.defaultProps.name;return Object(s.b)(function(e,a){var n=a.name||t;return{value:e.formState[n]||W,touched:e.formState[n+"_T"]||W,coreData:e.formState.coreData}},{updateRedux:I},null,{withRef:!0})(e)}function M(e,t,a,n){var r=t.name,o=t.required;if(e){if("string"!==typeof e)return{name:r,path:a,required:o,error:"invalidString"};if(e=e.trim()){var i=t.minLength,c=t.maxLength,l=t.pattern,s=t.nextValidator,u=e.length;if(i&&u<i)return{name:r,path:a,required:o,error:"minLength",values:{minLength:i}};if(c&&u>c)return{name:r,path:a,required:o,error:"maxLength",values:{maxLength:c}};if(l)if(!new RegExp(l).test(e))return{name:r,path:a,required:o,error:"pattern"};if(s){var d=s(e,t,a,n);if(d)return d}return n&&("upper-case"===t.inputClass&&(e=e.toLocaleUpperCase()),n[r]=e),!0}}if(o)return{name:r,path:a,required:o,error:"required"};n&&(n[r]="")}var D=function(e,t){return Object(d.a)({name:e},t,{validator:M})};function B(e,t,a,n){var r=M(e,t,a);if(!0===r){var o=t.name,i=t.required;e=e.trim();var c=[" ","..",".@","@."].find(function(t){return e.indexOf(t)>=0});if(c)return{name:o,path:a,required:i,error:"invalidEmail",values:{found:c}};var l=e.length,s=e.indexOf("@"),u=e.lastIndexOf("@"),d=e.lastIndexOf(".");return d===l-1||s<0||s<u||d<u?{name:o,path:a,required:i,error:"invalidEmail"}:(n&&(n[o]=e),!0)}return r}var H,U,_=D("homePhone",{maxLength:12,type:"tel",required:!1}),V=D("mobilePhone",{maxLength:12,type:"tel",required:!1,idiot:"38439"}),Y=(H="emailAddress",U={maxLength:80,minLength:6,required:!1,spellCheck:!1,htmlId:"otherField",type:"email"},Object(d.a)({name:H},U,{validator:B}));function $(e){e(_),e(V),e(Y)}var G=R(function(e){function t(){return Object(y.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props,t=e.renderField,a=e.value,n=void 0===a?{}:a,o=e.touched,i=void 0===o?{}:o,c=t,l=n[_.name]||n[V.name]||n[Y.name],s=!!i[_.name]&&!!i[V.name]&&!!i[Y.name]&&!l;return r.a.createElement(r.a.Fragment,null,r.a.createElement(c,Object.assign({},_,{required:s,sdtupid:87})),r.a.createElement(c,Object.assign({},V,{required:s})),r.a.createElement(c,Object.assign({},Y,{required:s})))}}]),t}(r.a.PureComponent));function X(e){var t=e.options,a=e.allowOption,n=e.rangeFrom,o=e.rangeTo,i=e.className,c=Object(q.a)(e,["options","allowOption","rangeFrom","rangeTo","className"]),l=e.value,s=e.required,u=e.id,d=l?"custom-select":"custom-select no-value",m=i?d+" "+i:d;return r.a.createElement("select",Object.assign({},c,{className:m}),(""===l||void 0===l||!1===s)&&r.a.createElement("option",{value:""},g(u+"-pleaseSelect",s)),function(e,t,a,n,o){var i=[];if(n||o){for(var c=n<o?1:-1,l=n;i.push(r.a.createElement("option",{key:l,value:l},l)),l!==o;l+=c);return i}var s=b(e),u=E(e);return s.forEach(function(e){t&&!t(e,a)||i.push(r.a.createElement("option",{key:e,value:e},u[e]||e))}),i}(t,a,e,n,o))}function J(e){var t=e.id,a=e.label;return r.a.createElement("fieldset",{className:"radio-fieldset",id:t},r.a.createElement("legend",null,g(a)),function(e){var t=e.options,a=e.allowOption,n=e.value,o=e.id,i=e.className,c=[],l="horizontal"===i?"radio-horizontal":"radio",s=b(t),u=E(t);return s.forEach(function(t){if(!a||a(t,e)){var i=o+"-"+t;c.push(r.a.createElement("div",{className:l,key:i},r.a.createElement("input",{id:i,name:o,type:"radio",value:t,checked:t===n,"aria-describedby":e["aria-describedby"],onChange:e.onChange,onBlur:e.onBlur}),r.a.createElement("label",{htmlFor:i},u[t]||t)))}}),c}(e))}var Z=D("taxRef",{maxLength:8,minLength:5,inputClass:"narrow upper-case",required:!0,spellCheck:!1,type:"tel",pattern:"^[0-9]+$"}),K=D("firstName",{maxLength:16,minLength:2}),Q=D("lastName",{maxLength:30,required:!0}),ee=D("username",{placeholder:"Username",autoComplete:"username",type:"text",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"}),te=D("gender",{component:J,options:"gender",required:!0,showLabel:!1,label:"Gender",inputClass:"medium",className:"horizontal"}),ae=D("zipCode",{maxLength:12,autoComplete:"postal-code",required:!1,inputClass:"narrow"}),ne={name:"phones",component:G,validateSection:$},re=D("country",{component:J,options:"country",required:!1,allowOption:function(e,t){return"AR"!==e||!1!==t.allowArgentina},stripProps:function(e){return e},showLabel:!1,label:"Country"}),oe=z(R(function(e){function t(){return Object(y.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.renderField,t=this.props,a=t.value,n=void 0===a?{}:a,o=t.allowArgentina,i=n.taxRef;return r.a.createElement("fieldset",{className:"form-fieldset"},r.a.createElement("legend",null,g(this.props.name)),e(Z),r.a.createElement("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%",paddingRight:"16px",boxSizing:"border-box"}},e(K)),r.a.createElement("div",{style:{display:"inline-block",verticalAlign:"top",width:"50%"}},e(Q)),e(te),e(ee,{required:!!i}),e(re,{allowArgentina:o,required:this.props.requireCountry||!1}),e(ae),e(ne))}}]),t}(r.a.PureComponent)));function ie(e){var t=e.name,a=e.children;return r.a.createElement("fieldset",{className:"form-fieldset"},r.a.createElement("legend",null,g(t)),a)}var ce=D("address1",{maxLength:35,required:!0}),le=D("address2",{maxLength:35,required:!1}),se=D("city",{maxLength:35,required:!1}),ue=D("region",{maxLength:35,required:!1,minLength:2}),de=D("zipCode",{maxLength:12,autoComplete:"postal-code",required:!1,inputClass:"narrow",minLength:4}),me=D("country",{component:X,options:"country",required:!0});function pe(e){e(ce),e(le),e(se),e(ue),e(de),e(me)}var he=R(function(e){function t(){return Object(y.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.renderField;return[e(ce),e(le),e(se),e(ue),e(de),e(me)]}}]),t}(r.a.PureComponent)),fe=function(e){var t=e.id,a=e.value,n=e.label,o=e.onChange,i=e.className,c=void 0===i?"checkbox":i,l=Object(q.a)(e,["id","value","label","onChange","className"]);return r.a.createElement("div",{className:c},r.a.createElement("input",Object.assign({},l,{checked:!!a,id:t,onChange:function(){return o({target:{value:!a}})},type:"checkbox"})),r.a.createElement("label",{htmlFor:t},g(n)))},ve=D("carsInHouse",{component:X,required:!0,rangeFrom:0,rangeTo:4,inputClass:"narrow"}),ge=D("parkingSpaces",{component:X,required:!1,rangeFrom:0,rangeTo:2,inputClass:"narrow"}),be=D("preferredRetireAge",{component:X,required:!1,rangeFrom:70,rangeTo:55,inputClass:"narrow"}),Ee={name:"consentSMS",component:fe,showLabel:!1,label:"Please send me SMS messages about the progress of my application."},ye={name:"consentEmail",component:fe,showLabel:!1,label:"Sign me up for regular email alerts."},Oe={name:"consentOther",component:fe,showLabel:!1,label:"Other consent option."},we={name:"homeAddress",component:he,validateSection:pe},Ce={name:"overseasAddress",component:he,validateSection:pe},je={name:"workAddress",component:he,validateSection:pe},ke={name:"contactHome",component:G,validateSection:$},Se={name:"contactOver",component:G,validateSection:$},xe=z(R(function(e){function t(){return Object(y.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.props.renderField;return r.a.createElement("div",null,r.a.createElement(ie,{name:"About you"},e(ve),e(ge),e(be),r.a.createElement("div",{style:{marginTop:"16px"}},e(Ee),e(ye),e(Oe))),r.a.createElement(ie,{name:"homeAddress"},e(we),e(ke)),r.a.createElement(ie,{name:"overseasAddress"},e(Ce),e(Se)),r.a.createElement(ie,{name:"workAddress"},e(je)))}}]),t}(r.a.PureComponent)));function Ne(e){var t=e.children,a=e.onClick,n=e.cnm,o=void 0===n?"default":n;return r.a.createElement("button",{className:"btn btn-"+o,onClick:a,type:"button"},t)}var Pe=function(e){function t(){return Object(y.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App bg-light"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:L.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",{className:"App-title"},"Tax calculator application")),r.a.createElement("form",null,r.a.createElement(oe,{path:"mainForm",name:"personalRef",requireCountry:!0}),r.a.createElement(oe,{path:"mainForm",name:"spouseRef",allowArgentina:!1}),r.a.createElement(xe,{path:"mainForm",name:"bigForm"}),r.a.createElement("p",{style:{textAlign:"right"}},r.a.createElement(Ne,{onClick:function(){return N.changePage("/tax-app/search")}},"Search"),r.a.createElement(Ne,{cnm:"secondary",onClick:function(){console.log(v.getState().formState),alert("reset todo")}},"Reset"),r.a.createElement(Ne,{cnm:"primary",onClick:function(){return console.log(v.getState().formState),N.changePage("/tax-app/search"),!1}},"Continue"))),r.a.createElement("p",{className:"App-intro"},"Thank you"))}}]),t}(r.a.Component);function Le(e){return r.a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"#fff"},e),r.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),r.a.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"}))}a(114);function Ae(e){var t=e.text;return t=t||"Page loading...",setTimeout(function(){var e=document.getElementById("loader-text");e&&e.focus()},200),r.a.createElement("div",{className:"loader-body"},r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"loader antiloader"},r.a.createElement("div",{className:"loader",style:{animation:"spin 0.8s linear infinite"}})))),r.a.createElement("span",{className:"loader-text","aria-live":"assertive",id:"loader-text",tabIndex:"-1"},t))}var qe=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).goHomePage=function(){a.setState({loading:!0}),setTimeout(function(){window.scrollTo(0,0),N.changePage("/tax-app")},3e3)},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this.state&&this.state.loading,t=e?{"aria-disabled":!0,"aria-hidden":!0,className:"loader-blur"}:{};return r.a.createElement("div",{className:"App bg-light"},r.a.createElement("div",t,r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",{className:"App-title"},r.a.createElement(Le,{style:{verticalAlign:"top"}})," ","Search page")),r.a.createElement("form",null,r.a.createElement(xe,{path:"mainForm",name:"bigForm"}),r.a.createElement("p",{style:{textAlign:"right"}},r.a.createElement(Ne,{onClick:this.goHomePage},"Home page"),r.a.createElement(Ne,{cnm:"primary",onClick:function(){return console.log(v.getState().formState),N.changePage("/tax-app/checkout"),!1}},"Continue"))),r.a.createElement("p",{className:"App-intro"},"Thank you")),e&&r.a.createElement(Ae,null))}}]),t}(r.a.Component);a(116);function Fe(e){var t=e.parent;function a(){t.setState({popup:!1})}setTimeout(function(){Re("exampleModalLive")},100);var n=r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"You can cancel this purchase now."),r.a.createElement("p",null,"Your basket will be empty of products"));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"exampleModalLive",className:"modal show",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLiveLabel",style:{display:"block"},onClick:a},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content",onClick:function(e){e.stopPropagation()}},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h5",{className:"modal-title",id:"exampleModalLiveLabel"},"Cancel this purchase?"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close",onClick:a},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},n),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{id:"closePop",type:"button",className:"btn btn-secondary","data-dismiss":"modal",onClick:a},"Close"),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:a},"Save changes"))))),r.a.createElement("div",{className:"modal-backdrop fade show",tabIndex:"0",onFocus:function(){return Re("closePop")}}))}function Re(e){var t=document.getElementById(e);t&&t.focus()}new RegExp(/^\d+$/);new RegExp(/^[a-z0-9]+$/i);var Te=D("cardNumber",{minLength:16,maxLength:16,type:"tel",required:!0}),We=D("cvvNumber",{minLength:3,maxLength:4,type:"tel",required:!0,inputClass:"tiny",pattern:"^[0-9]+$"}),Ie=D("nameOnCard",{maxLength:40,minLength:4,inputClass:"upper-case",required:!0,spellCheck:!1,pattern:"^[a-zA-Z ]+$"}),ze={name:"smsTrack",component:fe,showLabel:!1,label:"Please send me SMS messages to track my order.",required:!0,validator:function(e,t,a,n){var r=t.name,o=t.required;return o&&!e?{name:r,path:a,required:o,error:"required"}:(n&&(n[r]=!!e),!0)}};function Me(e){return e(Te),e(We),e(Ie),e(ze),!0}var De=function(e){function t(){var e,a;Object(y.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(w.a)(this,(e=Object(C.a)(t)).call.apply(e,[this].concat(r)))).doCheckout=function(){var e,t,n={},r=[];!function e(t,a,n,r,o){return t.validateSection(function(t,i){var c=(t=i?Object(d.a)({},t,i):t).name;if(!t.validateSection){var l=a&&a[c],s=t.validator(l,t,o,n);return s&&s.error&&r.push(s),s}if(void 0!==c){var u=t.isArray?[]:{};!1!==e(t,a&&a[c],u,r,o+"-"+c)&&(n[c]=u)}else e(t,a,n,r,o)},a,t,n,r,o)}({validateSection:Me},a.props.value,n,r,"paymentPage-checkOutForm"),console.log("OUTPUT",n),console.log("ERRORS",r),n.smsTrack?(console.log("CHGECKOUT",a.props.value),a.setState({inputErrors:void 0}),e=Object(A.a)(Object(A.a)(a)),t=a.props.value,e.setState({loading:!0,message:"Checking payment details..."}),Ue(t).then(function(t){return He(t,e,"Checking stock and delivery schedule")}).then(function(e){return Ue(e)}).then(function(t){return He(t,e,"Transferring funds")}).then(function(e){return Ue(e)}).then(function(t){return He(t,e,"",!1)}).then(function(e){return function(e,t){if(console.log("paymentFinished",e),!e||"666"===t.cvvNumber)throw new Error("Validation of the CVV number failed");window.scrollTo(0,0),N.changePage("/tax-app")}(e,t)}).catch(function(t){return function(e,t){e.setState({message:"Error occurred"}),alert("An error occurred\n"+t),e.setState({loading:!1})}(e,t)})):(a.setState({inputErrors:Date.now(),errors:r}),a.props.setShowErrors(!0),a.focusToFirstError(r))},a}return Object(j.a)(t,e),Object(O.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.name;this.props.updateRedux({type:"SET",key:e+"_T",value:{}})}},{key:"componentDidUpdate",value:function(e,t,a){(this.state||{}).inputErrors;t&&t.inputErrors}},{key:"focusToFirstError",value:function(e){e||(e=this.state.errors||[]);var t=e[0];if(t){var a=t.path+"-"+t.name,n=document.getElementById(a);n&&n.focus()}}},{key:"render",value:function(){var e=this,t=this.props.renderField,a=this.state||{},n=a.loading,o=a.message,i=a.popup,c=n?{"aria-disabled":!0,"aria-hidden":!0,className:"loader-blur"}:{},l=(this.state||{}).inputErrors,s=function(t){return e.setState({inputErrors:void 0,errors:[]}),e.props.setShowErrors(!1),alert("!!!"),t.preventDefault(),!1};return r.a.createElement("div",{className:"App"},r.a.createElement("div",c,r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:L.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",{className:"App-title"},"Checkout")),r.a.createElement("form",null,r.a.createElement("h2",null,"Your payment details"),t(Te),t(We),t(Ie),r.a.createElement("br",null),t(ze),l&&r.a.createElement("div",{id:"theErrors",tabIndex:"0",className:"alert alert-primary"},"Please correct errors and continue ",l,r.a.createElement("a",{href:"/",onClick:s,tabIndex:"0"},"Please enter a valid credit card number"),r.a.createElement("a",{href:"/",onClick:s,tabIndex:"0"},"Please enter the CVV number")),r.a.createElement("p",{style:{textAlign:"right"}},r.a.createElement(Ne,{onClick:function(){window.history.back()}},"Cancel"),r.a.createElement(Ne,{onClick:function(){e.setState({popup:1})}},"Popup"),r.a.createElement(Ne,{cnm:"primary",onClick:this.doCheckout},"Make Payment"))),r.a.createElement("p",{className:"App-intro"},"Terms & conditions etc here")),n&&r.a.createElement(Ae,{text:o}),i&&r.a.createElement(Fe,{parent:this}))}}]),t}(r.a.Component);De.defaultProps={name:"checkOutForm",path:"paymentPage"};var Be=z(R(De));function He(e,t,a){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return t.setState({message:a,loading:n}),e}function Ue(e){return new Promise(function(t){setTimeout(function(){return t(e)},1e3)})}N.defineRoute("/",Pe,"React tax application"),N.defineRoute("/tax-app",Pe,"React tax application"),N.defineRoute("/tax-app/search",qe,"React search page"),N.defineRoute("/tax-app/deals",qe,"React hot deals page"),N.defineRoute("/tax-app/checkout",Be,"Checkout page"),N.defineRoute(function(e){if("payment"===e[1])return{Compo:Be,title:"Payment record {record}",values:{record:e[2]}}});var _e=function(e){function t(){return Object(y.a)(this,t),Object(w.a)(this,Object(C.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement(N,null)}}]),t}(r.a.Component);g=function(e,t){return e?e.endsWith("country-pleaseSelect")?t?"Choose a country":"No country selected":e.endsWith("gender-pleaseSelect")?"Please select a gender":e.endsWith("gender-required")?"Please choose a gender":e.endsWith("-pleaseSelect")?t?"Please choose":"Not specified":e.endsWith("-address1")?"First line of address, for example house number and street":e.endsWith("-address2")?"Second line of address":e.endsWith("-city")?"City":e.endsWith("-region")?"State or Province":e.endsWith("-country")?"Country":e.endsWith("-zipCode")?"Zip code":e.endsWith("-firstName")?"First name":e.endsWith("-lastName")?"Surname":e.endsWith("-taxRef")?"Tax Reference Number":e.endsWith("-username")?"User name":e.endsWith("-gender")?"Gender":e.endsWith("-homePhone")?"Home telephone":e.endsWith("-mobilePhone")?"Mobile phone":e.endsWith("-emailAddress")?"Email address":e.endsWith("-carsInHouse")?"How many cars are there in your household?":e.endsWith("-parkingSpaces")?"How many parking spaces do you have exclusive use of?":e.endsWith("-preferredRetireAge")?"What is your preferred retirement age?":e.endsWith("-cardNumber")?"Payment card number":e.endsWith("-cvvNumber")?"CVV":e.endsWith("-nameOnCard")?"Name on card":{personalRef:"Your personal details",spouseRef:"Your spouse details"}[e]||e:"Undefined"},function(e){b=e}(function(e){return{gender:["M","F"],country:["GB","US","CN","BW","AR"],months:["01","02","03","04","05","06","07","08","09","10","11","12"]}[e]||["Y","N"]}),function(e){E=e}(function(e){return{gender:{M:"Male",F:"Female"},country:{GB:"United Kingdom",US:"United States",CN:"China",BW:"Botswana",AR:"Argentina"}}[e]||{}});setTimeout(function(){return e=_e,void i.a.render(r.a.createElement(s.a,{store:v},r.a.createElement(e,null)),document.getElementById("root"));var e},500),function(){if("serviceWorker"in navigator){if(new URL("/tax-app",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/tax-app","/service-worker.js");c?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):l(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):l(e)})}}()},27:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},65:function(e,t,a){e.exports=a(118)}},[[65,2,1]]]);
//# sourceMappingURL=main.ae830f04.chunk.js.map